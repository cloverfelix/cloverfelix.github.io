<!DOCTYPE html>
<html lang="zh-cn">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Docker - clover</title><meta name="Description" content="docker"><meta property="og:title" content="Docker" />
<meta property="og:description" content="docker" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cloverfelix.github.io/docker/" /><meta property="og:image" content="https://cloverfelix.github.io/RW.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-06-01T10:49:43&#43;08:00" />
<meta property="article:modified_time" content="2021-06-01T10:49:43&#43;08:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://cloverfelix.github.io/RW.png"/>

<meta name="twitter:title" content="Docker"/>
<meta name="twitter:description" content="docker"/>
<meta name="application-name" content="Clover">
<meta name="apple-mobile-web-app-title" content="Clover">

<meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://cloverfelix.github.io/docker/" /><link rel="prev" href="https://cloverfelix.github.io/springboot/" /><link rel="next" href="https://cloverfelix.github.io/mybatis/" /><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css">
    <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css"></noscript><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css">
    <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Docker",
        "inLanguage": "zh-cn",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/cloverfelix.github.io\/docker\/"
        },"image": ["https:\/\/cloverfelix.github.io\/images\/Apple-Devices-Preview.png"],"genre": "posts","keywords": "Docker","wordcount":  14319 ,
        "url": "https:\/\/cloverfelix.github.io\/docker\/","datePublished": "2021-06-01T10:49:43+08:00","dateModified": "2021-06-01T10:49:43+08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "clover","logo": "https:\/\/cloverfelix.github.io\/images\/RW.png"},"author": {
                "@type": "Person",
                "name": "Clover"
            },"description": "docker"
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">
            if (window.localStorage && localStorage.getItem('theme')) {
                let theme = localStorage.getItem('theme');
                if (theme === 'light' || theme === 'dark' || theme === 'black') {
                    document.body.setAttribute('theme', theme);
                } else {
                    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                        document.body.setAttribute('theme', 'dark');
                    }
                    else {
                        document.body.setAttribute('theme', 'light');
                    }
                }
            } else {
                if ('auto' === 'light' || 'auto' === 'dark' || 'auto' === 'black') {
                    document.body.setAttribute('auto');
                    window.localStorage && localStorage.setItem('theme', 'auto');
                } else {
                    window.localStorage && localStorage.setItem('theme', 'auto');
                    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                        document.body.setAttribute('theme', 'dark');
                    }
                    else {
                        document.body.setAttribute('theme', 'light');
                    }
                }
            }
            function getMeta(metaName) {
                const metas = document.getElementsByTagName('meta'); 
                for (let i = 0; i < metas.length; i++) {
                    if (metas[i].getAttribute('name') === metaName) {
                        return metas[i];
                    }
                }
                return '';
            }
            let themeColorMeta = getMeta('theme-color');
            if (document.body.getAttribute('theme') != 'light') {
                themeColorMeta.content = '#000000';
            }
        </script>
        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="clover"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw'></i></span>Clover</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 所有文章 </a><a class="menu-item" href="/tags/"> 标签 </a><a class="menu-item" href="/categories/"> 分类 </a><a class="menu-item" href="/about/"> 关于 </a><a class="menu-item" href="https://github.com/cloverfelix" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i>  </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-select" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                    <select class="color-theme-select" id="theme-select-desktop" title="切换主题">
                        <option value="light">浅色</option>
                        <option value="dark">深色</option>
                        <option value="black">黑色</option>
                        <option value="auto">跟随系统</option>
                    </select>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="clover"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw'></i></span>Clover</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/posts/" title="">所有文章</a><a class="menu-item" href="/tags/" title="">标签</a><a class="menu-item" href="/categories/" title="">分类</a><a class="menu-item" href="/about/" title="">关于</a><a class="menu-item" href="https://github.com/cloverfelix" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i></a><a href="javascript:void(0);" class="menu-item theme-select" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
                <select class="color-theme-select" id="theme-select-mobile" title="切换主题">
                    <option value="light">浅色</option>
                    <option value="dark">深色</option>
                    <option value="black">黑色</option>
                    <option value="auto">跟随系统</option>
                </select>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
        <h2 class="toc-title">目录</h2>
        <div class="toc-content" id="toc-content-auto"></div>
    </div><script>document.body.setAttribute("pageStyle", "normal")</script><script>document.body.setAttribute("autoTOC", "true")</script><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Docker</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>Clover</a></span>&nbsp;<span class="post-category">收录于 <a href="/categories/docker/"><i class="far fa-folder fa-fw"></i>Docker</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2021-06-01">2021-06-01</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 14319 字&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 29 分钟&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#参考资料">参考资料</a></li>
    <li><a href="#前期基础">前期基础</a></li>
    <li><a href="#docker概述">Docker概述</a>
      <ul>
        <li><a href="#docker为什么会出现">Docker为什么会出现</a></li>
        <li><a href="#docker的历史">Docker的历史</a></li>
        <li><a href="#容器vs虚拟机">容器vs虚拟机</a>
          <ul>
            <li><a href="#虚拟机原理示意图">虚拟机原理示意图</a></li>
            <li><a href="#容器化技术示意图">容器化技术示意图</a></li>
            <li><a href="#二者对比">二者对比</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#docker安装">Docker安装</a>
      <ul>
        <li><a href="#docker的基本组成">Docker的基本组成</a></li>
        <li><a href="#环境准备">环境准备</a></li>
        <li><a href="#安装xshell">安装xshell</a></li>
        <li><a href="#centos安装">Centos安装</a></li>
        <li><a href="#卸载旧的版本">卸载旧的版本</a></li>
        <li><a href="#安装基本环境">安装基本环境</a></li>
        <li><a href="#设置镜像的仓库">设置镜像的仓库</a></li>
        <li><a href="#安装docker引擎">安装docker引擎</a></li>
        <li><a href="#启动docker">启动Docker</a></li>
        <li><a href="#卸载docker">卸载Docker</a></li>
        <li><a href="#阿里云镜像加速">阿里云镜像加速</a></li>
      </ul>
    </li>
    <li><a href="#底层原理">底层原理</a></li>
    <li><a href="#docker命令">Docker命令</a>
      <ul>
        <li><a href="#帮助命令">帮助命令</a></li>
        <li><a href="#镜像命令">镜像命令</a>
          <ul>
            <li><a href="#docker-images">docker images</a></li>
            <li><a href="#docker-search">docker search</a></li>
            <li><a href="#docker-pull">docker pull</a></li>
            <li><a href="#docker-rmi">docker rmi</a></li>
          </ul>
        </li>
        <li><a href="#容器命令">容器命令</a>
          <ul>
            <li><a href="#新建容器并启动">新建容器并启动</a></li>
            <li><a href="#进入退出容器">进入退出容器</a></li>
            <li><a href="#查看运行的容器">查看运行的容器</a></li>
            <li><a href="#退出容器">退出容器</a></li>
            <li><a href="#删除容器">删除容器</a></li>
            <li><a href="#启动和停止容器的操作">启动和停止容器的操作</a></li>
          </ul>
        </li>
        <li><a href="#常用其他命令">常用其他命令</a>
          <ul>
            <li><a href="#后台启动docker">后台启动docker</a></li>
            <li><a href="#查看日志">查看日志</a></li>
            <li><a href="#查看容器中进程信息">查看容器中进程信息</a></li>
            <li><a href="#查看正在镜像的元数据">查看正在镜像的元数据</a></li>
            <li><a href="#进入当前正在运行的容器">进入当前正在运行的容器</a></li>
            <li><a href="#从容器内拷贝文件到主机上">从容器内拷贝文件到主机上</a></li>
            <li><a href="#查看内容占用">查看内容占用</a></li>
            <li><a href="#小结">小结</a></li>
            <li><a href="#作业练习">作业练习</a>
              <ul>
                <li><a href="#部署nginx">部署Nginx</a></li>
                <li><a href="#部署tomcat">部署tomcat</a>
                  <ul>
                    <li><a href="#官方方法">官方方法</a></li>
                    <li><a href="#正常方法">正常方法</a></li>
                  </ul>
                </li>
                <li><a href="#部署eskibana">部署es+kibana</a></li>
                <li><a href="#思考用kibana链接elasticsearch">思考：用kibana链接elasticsearch</a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#可视化">可视化</a>
          <ul>
            <li><a href="#portainer">portainer</a></li>
          </ul>
        </li>
        <li><a href="#heading"></a></li>
      </ul>
    </li>
    <li><a href="#docker镜像">Docker镜像</a>
      <ul>
        <li><a href="#原理">原理</a></li>
        <li><a href="#commit提交镜像">commit提交镜像</a></li>
      </ul>
    </li>
    <li><a href="#容器数据卷">容器数据卷</a>
      <ul>
        <li><a href="#什么是容器卷">什么是容器卷</a></li>
        <li><a href="#使用数据卷">使用数据卷</a></li>
        <li><a href="#实战安装mysql">实战安装mysql</a></li>
        <li><a href="#具名和匿名挂载">具名和匿名挂载</a></li>
        <li><a href="#使用dockerfile来构建docker镜像的文件">使用DockerFile来构建docker镜像的文件</a></li>
        <li><a href="#多个容器数据共享">多个容器数据共享</a></li>
      </ul>
    </li>
    <li><a href="#dockerfile">DockerFile</a>
      <ul>
        <li><a href="#官方dockerfile示例">官方DockerFile示例</a></li>
        <li><a href="#dockerfile基础知识">DockerFile基础知识</a></li>
        <li><a href="#dockerfile命令">DockerFile命令</a></li>
        <li><a href="#heading-1"></a></li>
        <li><a href="#实战构建自己的centos">实战构建自己的centos</a></li>
        <li><a href="#cmd与entrypoint">CMD与ENTRYPOINT</a></li>
        <li><a href="#实战tomcat镜像">实战Tomcat镜像</a></li>
        <li><a href="#发布自己的镜像">发布自己的镜像</a></li>
        <li><a href="#小结-1">小结：</a></li>
      </ul>
    </li>
    <li><a href="#docker网络">Docker网络</a>
      <ul>
        <li><a href="#理解docker0">理解docker0</a></li>
        <li><a href="#自定义网络">自定义网络</a></li>
        <li><a href="#网络连通">网络连通</a></li>
        <li><a href="#实战部署redis集群">实战：部署Redis集群</a></li>
      </ul>
    </li>
    <li><a href="#idea整合docker">IDEA整合Docker</a></li>
    <li><a href="#docker-整合docker">Docker 整合Docker</a></li>
    <li><a href="#docker-compose">Docker Compose</a></li>
    <li><a href="#docker-swarm">Docker Swarm</a></li>
    <li><a href="#各种bug">各种bug</a>
      <ul>
        <li><a href="#xshell链接失败">Xshell链接失败</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h1 id="docker">Docker</h1>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601110908.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601110908.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601110908.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601110908.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601110908.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601110908.png"
    /></p>
<h2 id="参考资料">参考资料</h2>
<p>官方文档：https://docs.docker.com/docker-for-windows/</p>
<p>【官方文档超级详细】</p>
<p>仓库地址：https://hub.docker.com/</p>
<p>【发布到仓库，git pull push】</p>
<p>b站教程：https://www.bilibili.com/video/BV1og4y1q7M4?</p>
<p>【这个教程非常简洁！且深入！基于企业应用场景！推荐！以下笔记都基于该课程】</p>
<h2 id="前期基础">前期基础</h2>
<p>linux基本命令，类似cd，mkdir等</p>
<h2 id="docker概述">Docker概述</h2>
<h3 id="docker为什么会出现">Docker为什么会出现</h3>
<p>一款产品，开发和上线两套环境，应用环境配置费时费力，而且容易出问题，尤其</p>
<p>对于机器学习和深度学习的库更是如此，很可能存在版本问题、底层依赖冲突问题</p>
<p>所以发布项目时，不只是一套代码过去，而是代码+环境整体打包过去，所谓开发</p>
<p>即运维，保证系统稳定性，提高部署效率</p>
<p>使用Docker后的流程：</p>
<ul>
<li>
<p>开发：建立模型&ndash;环境&ndash;打包带上环境，即镜像&ndash;放到Docker仓库</p>
</li>
<li>
<p>部署：下载Docker中的镜像，直接运行即可</p>
</li>
</ul>
<p><strong>Docker的思想来自于集装箱，集装箱，对环境进行隔离</strong></p>
<p><strong>Docker通过隔离机制，可以将服务器利用到极致。</strong></p>
<h3 id="docker的历史">Docker的历史</h3>
<p>2010年，几个搞IT的人，在美国成立一家公司<code>dotCloud</code>，做一些pass的云计服</p>
<p>务，他们将自己的容器化技术命名为Docker，Docker基于Go语言开发，Docker刚</p>
<p>刚诞生的时候，没有引起行业的注意，dotCloud活不下去，然后他们决定开源</p>
<p>2013年，创始人将Docker开源，不开则以，一开惊人，刚开源的时候，每个月都</p>
<p>会更新一个版本，2014年4月9日，Docker 1.0发布</p>
<h3 id="容器vs虚拟机">容器vs虚拟机</h3>
<pre><code>在容器技术出来之前，用的是虚拟机技术
</code></pre>
<h4 id="虚拟机原理示意图">虚拟机原理示意图</h4>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601110955.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601110955.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601110955.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601110955.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601110955.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601110955.png"
    /></p>
<p><strong>缺点</strong>：</p>
<ol>
<li>资源占用多</li>
<li>冗余步骤多</li>
<li>启动很慢</li>
</ol>
<h4 id="容器化技术示意图">容器化技术示意图</h4>
<p>不是模拟的完整的操作系统</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111016.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111016.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111016.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111016.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111016.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111016.png"
    /></p>
<h4 id="二者对比">二者对比</h4>
<p>比较虚拟机和Docker的不同</p>
<table>
<thead>
<tr>
<th></th>
<th>传统虚拟机</th>
<th>Docker</th>
</tr>
</thead>
<tbody>
<tr>
<td>虚拟内容</td>
<td>硬件+完整的操作系统+软件</td>
<td>APP+LIB</td>
</tr>
<tr>
<td>大小</td>
<td>笨重，通常几个G</td>
<td>轻便几个M或KB</td>
</tr>
<tr>
<td>启动速度</td>
<td>慢，分钟级</td>
<td>快，秒级</td>
</tr>
</tbody>
</table>
<h2 id="docker安装">Docker安装</h2>
<h3 id="docker的基本组成">Docker的基本组成</h3>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111108.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111108.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111108.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111108.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111108.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111108.png"
    /></p>
<p>明确几个概念：</p>
<ol>
<li>
<p><strong>镜像(image)</strong>：docker镜像好比一个模板，可以通过这个模板来创建容器(container)，一个镜像可以创建多个容器，类似Python中的Class</p>
</li>
<li>
<p><strong>容器(container)</strong>：类似Python中通过Class创建的实例，Object；容器可以理解为一个简易的系统</p>
</li>
<li>
<p><strong>仓库(repository)</strong>：存放镜像的地方，</p>
<p>分为公有仓库和私有仓库</p>
<ul>
<li>
<p>Docker Hub：国外的</p>
</li>
<li>
<p>阿里云：配置镜像加速</p>
</li>
</ul>
</li>
</ol>
<h3 id="环境准备">环境准备</h3>
<p>我们要有一台服务器，并且可以操作它</p>
<ol>
<li>Linux命令基础，购买linux阿里云的服务器</li>
<li>CentOS 7</li>
<li>使用Xshell链接远程服务器</li>
</ol>
<h3 id="安装xshell">安装xshell</h3>
<p>下载CentOS7 <a href="https://www.jianshu.com/p/a63f47e096e8">https://www.jianshu.com/p/a63f47e096e8</a></p>
<p>下载VMware 360软件管家下载</p>
<p>VMware配置虚拟机 <a href="https://blog.csdn.net/babyxue/article/details/80970526">https://blog.csdn.net/babyxue/article/details/80970526</a></p>
<p>xshell链接服务器 <a href="https://blog.csdn.net/zzy1078689276/article/details/77280814">https://blog.csdn.net/zzy1078689276/article/details/77280814</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">[root@192 ~]# cd /
[root@192 /]# pwd
/
[root@192 /]# ls
bin  boot  dev  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
[root@192 /]# uname -r
3.10.0-1127.el7.x86_64
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111141.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111141.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111141.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111141.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111141.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111141.png"
    /></p>
<p>用户名</p>
<p>密码</p>
<p>查看ip：vmware里面输入，ip addIPr</p>
<p><a href="https://www.bilibili.com/video/BV1og4y1q7M4?p=6">https://www.bilibili.com/video/BV1og4y1q7M4?p=6</a></p>
<h3 id="centos安装">Centos安装</h3>
<p><a href="https://docs.docker.com/engine/install/centos/">https://docs.docker.com/engine/install/centos/</a></p>
<h3 id="卸载旧的版本">卸载旧的版本</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback"># 卸载旧的版本
$ sudo yum remove docker \
                  docker-client \
                  docker-client-latest \
                  docker-common \
                  docker-latest \
                  docker-latest-logrotate \
                  docker-logrotate \
                  docker-engine

</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111157.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111157.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111157.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111157.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111157.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111157.png"
    /></p>
<h3 id="安装基本环境">安装基本环境</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback"># 安装基本的安装包
$ sudo yum install -y yum-utils
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111309.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111309.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111309.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111309.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111309.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111309.png"
    /></p>
<h3 id="设置镜像的仓库">设置镜像的仓库</h3>
<pre><code>注意！！下载默认用国外的，太慢不要用！

用国内镜像，百度搜索，docker的阿里云镜像地址
</code></pre>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback"># 不要用官网默认这个！
$ sudo yum-config-manager \
    --add-repo \
    https://download.docker.com/linux/centos/docker-ce.repo # 默认是国外的

# 换成下面的

$ sudo yum-config-manager \
    --add-repo \
    https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo # 阿里云镜像
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111340.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111340.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111340.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111340.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111340.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111340.png"
    /></p>
<p>直接复制粘贴就OK了</p>
<p>更新软件包索引</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">yum makecache fast
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111404.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111404.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111404.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111404.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111404.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111404.png"
    /></p>
<p>没有问题的话就是可以用的</p>
<h3 id="安装docker引擎">安装docker引擎</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">yum</span> <span class="n">install</span> <span class="n">docker</span><span class="o">-</span><span class="n">ce</span> <span class="n">docker</span><span class="o">-</span><span class="n">ce</span><span class="o">-</span><span class="n">cli</span> <span class="n">containerd</span><span class="o">.</span><span class="n">io</span> <span class="c1"># docker-ce 社区版 ee 企业版</span>
</code></pre></td></tr></table>
</div>
</div><pre><code>注意这里会有几个个y/n的判断
</code></pre>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111427.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111427.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111427.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111427.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111427.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111427.png"
    /></p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111446.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111446.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111446.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111446.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111446.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111446.png"
    /></p>
<p>要看到Complet再收手！</p>
<h3 id="启动docker">启动Docker</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">systemctl start docker # 代表启动成功
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">docker version
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">Client: Docker Engine - Community
 Version:           19.03.11
 API version:       1.40
 Go version:        go1.13.10
 Git commit:        42e35e61f3
 Built:             Mon Jun  1 09:13:48 2020
 OS/Arch:           linux/amd64
 Experimental:      false

Server: Docker Engine - Community
 Engine:
  Version:          19.03.11
  API version:      1.40 (minimum version 1.12)
  Go version:       go1.13.10
  Git commit:       42e35e61f3
  Built:            Mon Jun  1 09:12:26 2020
  OS/Arch:          linux/amd64
  Experimental:     false
 containerd:
  Version:          1.2.13
  GitCommit:        7ad184331fa3e55e52b890ea95e65ba581ae3429
 runc:
  Version:          1.0.0-rc10
  GitCommit:        dc9208a3303feef5b3839f4323d9beb36df0a9dd
 docker-init:
  Version:          0.18.0
  GitCommit:        fec3683

</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">docker run hello-world
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111510.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111510.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111510.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111510.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111510.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111510.png"
    /></p>
<p>中间一堆是签名信息</p>
<p>run的运行流程图</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111642.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111642.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111642.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111642.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111642.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111642.png"
    /></p>
<p>查看下载的镜像</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">docker images
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111528.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111528.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111528.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111528.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111528.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111528.png"
    /></p>
<h3 id="卸载docker">卸载Docker</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback"># 卸载依赖
yum remove docker-ce docker-ce-cli containerd.io

# 删除资源
rm -rf /var/lib/docker # docker 的默认工作路径

</code></pre></td></tr></table>
</div>
</div><h3 id="阿里云镜像加速">阿里云镜像加速</h3>
<p>支付宝扫码登录，短信验证，确认授权</p>
<p>我有两个问题</p>
<ol>
<li>
<p>阿里云镜像加速必须配置嘛？</p>
<blockquote>
<p>哎呦我去: 加速快</p>
<p>哎呦我去: 要是翻墙就无所谓了</p>
</blockquote>
</li>
<li>
<p>这个阿里云必须要买嘛，买哪个，我看阿里云好多产品</p>
<blockquote>
<p>哎呦我去:不需要买</p>
<p>哎呦我去:免费的</p>
<p>哎呦我去:阿里云搜索容器服务</p>
<p>哎呦我去:有一个镜像加速</p>
</blockquote>
</li>
<li>
<p>这个地址是哪来的呀</p>
</li>
</ol>
<p>操作</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111707.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111707.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111707.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111707.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111707.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111707.png"
    /></p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111722.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111722.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111722.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111722.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111722.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111722.png"
    /></p>
<p>控制台搜索 容器镜像服务</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111736.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111736.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111736.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111736.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111736.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111736.png"
    /></p>
<p>找到加速地址</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111750.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111750.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111750.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111750.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111750.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111750.png"
    /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">sudo mkdir -p /etc/docker # 创建一个目录
sudo tee /etc/docker/daemon.json &lt;&lt;-&#39;EOF&#39;
{
  &#34;registry-mirrors&#34;: [&#34;https://uyfgafsw.mirror.aliyuncs.com&#34;]
}
EOF # 编写配置文件

sudo systemctl daemon-reload # 重启服务
sudo systemctl restart docker # 重启docker
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111810.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111810.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111810.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111810.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111810.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111810.png"
    /></p>
<p><a href="https://www.processon.com/" target="_blank" rel="noopener noreffer">在线画图软件ProcessOn</a></p>
<p><a href="https://www.bilibili.com/video/BV177411K7bH" target="_blank" rel="noopener noreffer">服务器及购买相关介绍</a></p>
<h2 id="底层原理">底层原理</h2>
<p>Docker是真么工作的？</p>
<p>Docker是一个Client-Server结构的系统，Docker的守护进程在主机上。通过Socket从客户端访问！</p>
<p>DockerServer接受到Docker-Client的指令，</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111827.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111827.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111827.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111827.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111827.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111827.png"
    /></p>
<p>Docker为什么比VM快？</p>
<pre><code>1. Docker有着比虚拟机更少的抽象层
2. docker主要用的是宿主机的内核，vm需要Guest OS
</code></pre>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111840.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111840.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111840.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111840.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111840.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111840.png"
    /></p>
<p>所以说新建一个容器的时候，docker不需要像虚拟机一样重新加载一个操作系统内核，避免引导</p>
<h2 id="docker命令">Docker命令</h2>
<h3 id="帮助命令">帮助命令</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">docker version # 显示docker的基本信息
docker info # 系统信息，镜像和容器的数量
docker 命令 --help # 全部信息
</code></pre></td></tr></table>
</div>
</div><p><a href="https://docs.docker.com/reference/" target="_blank" rel="noopener noreffer">官网文档</a></p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111857.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111857.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111857.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111857.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111857.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111857.png"
    /></p>
<h3 id="镜像命令">镜像命令</h3>
<h4 id="docker-images">docker images</h4>
<p>查看所有本地主机上的镜像</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># docker images</span>

</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111912.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111912.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111912.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111912.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111912.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111912.png"
    /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback"># 解释
REPOSITORY  # 镜像仓库源
TAG                 # 镜像的标签
IMAGE ID           # 镜像的ID
CREATED           # 镜像的创建时间
SIZE # 镜像的大小
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">--all , -a		Show all images <span class="o">(</span>default hides intermediate images<span class="o">)</span> <span class="c1"># 显示所有</span>
--digests		Show digests
--filter , -f		Filter output based on conditions provided
--format		Pretty-print images using a Go template
--no-trunc		Don’t truncate output
--quiet , -q		Only show numeric IDs <span class="c1"># 只显示id</span>
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111929.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111929.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111929.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111929.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111929.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111929.png"
    /></p>
<h4 id="docker-search">docker search</h4>
<p>搜索仓库中的镜像，相当于网页搜索</p>
<p><a href="http://hub.docker.com" target="_blank" rel="noopener noreffer">网页搜索</a></p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111944.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111944.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111944.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111944.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111944.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111944.png"
    /></p>
<p>mysql</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111958.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111958.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111958.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111958.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111958.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601111958.png"
    /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">docker search mysql
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112012.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112012.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112012.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112012.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112012.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112012.png"
    /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">docker search --help
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112030.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112030.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112030.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112030.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112030.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112030.png"
    /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># 解释</span>
Options:
  -f, --filter filter   Filter output based on conditions provided
      --format string   Pretty-print search using a Go template
      --limit int       Max number of search results <span class="o">(</span>default 25<span class="o">)</span>
      --no-trunc        Don<span class="err">&#39;</span>t truncate output

</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">docker search mysql --filter=STARS=3000 # 搜索出Stars大于3000的
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112053.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112053.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112053.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112053.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112053.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112053.png"
    /></p>
<h4 id="docker-pull">docker pull</h4>
<p>下载镜像</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">docker pull mysql <span class="c1"># 下载mysql镜像，default tag，默认最新版latest</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># sudo systemctl daemon-reload</span>
<span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># sudo systemctl restart docker</span>
<span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># docker pull mysql</span>
Using default tag: latest <span class="c1"># 不写tag默认最新版</span>
latest: Pulling from library/mysql
8559a31e96f4: Pull <span class="nb">complete</span>  <span class="c1"># layer 分层下载，docker image的核心 联合文件系统</span>
d51ce1c2e575: Pull <span class="nb">complete</span> 
c2344adc4858: Pull <span class="nb">complete</span> 
fcf3ceff18fc: Pull <span class="nb">complete</span> 
16da0c38dc5b: Pull <span class="nb">complete</span> 
b905d1797e97: Pull <span class="nb">complete</span> 
4b50d1c6b05c: Pull <span class="nb">complete</span> 
c75914a65ca2: Pull <span class="nb">complete</span> 
1ae8042bdd09: Pull <span class="nb">complete</span> 
453ac13c00a3: Pull <span class="nb">complete</span> 
9e680cd72f08: Pull <span class="nb">complete</span> 
a6b5dc864b6c: Pull <span class="nb">complete</span> 
Digest: sha256:8b7b328a7ff6de46ef96bcf83af048cb00a1c86282bfca0cb119c84568b4caf6#签名
Status: Downloaded newer image <span class="k">for</span> mysql:latest
docker.io/library/mysql:latest <span class="c1"># 真实地址</span>

<span class="c1"># 即</span>
docker pull mysql
<span class="c1"># 等价于</span>
docker pull docker.io/library/mysql:latest

</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># 指定版本下载 </span>
docker pull mysql:5.7
</code></pre></td></tr></table>
</div>
</div><p>版本来自于官网，版本库https://hub.docker.com/_/mysql</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112136.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112136.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112136.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112136.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112136.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112136.png"
    /></p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112149.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112149.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112149.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112149.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112149.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112149.png"
    /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">docker images
</code></pre></td></tr></table>
</div>
</div><p>此时查看镜像，可以看到新下载的两个</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112208.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112208.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112208.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112208.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112208.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112208.png"
    /></p>
<h4 id="docker-rmi">docker rmi</h4>
<p>remove images</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># 删除一个 可以通过名称 也可以指定id -f表示删除所有</span>
docker rmi -f 9cfcce23593a
<span class="c1"># 删除多个 用空格分隔id</span>
docker rmi -f id id id
<span class="c1"># 删除所有 </span>
docker rmi -f <span class="k">$(</span>docker images -aq<span class="k">)</span> <span class="c1"># images -aq就是查所有镜像id，从而递归删除</span>
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112237.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112237.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112237.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112237.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112237.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112237.png"
    /></p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112253.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112253.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112253.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112253.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112253.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112253.png"
    /></p>
<h3 id="容器命令">容器命令</h3>
<p>说明：有了镜像才能创建容器，linux，下载一个centos镜像来测试学习</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">docker pull centos
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112310.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112310.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112310.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112310.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112310.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112310.png"
    /></p>
<h4 id="新建容器并启动">新建容器并启动</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">docker run <span class="o">[</span>可选参数<span class="o">]</span> image

<span class="c1"># 参数说明</span>
--name<span class="o">=</span>“Name” <span class="c1"># 容器名字，用于区分容器</span>
-d 后台方式运行
-it 使用交互方式运行，进入容器查看内容
-p 指定容器的端口 如-p 8080::8080
	-p ip:主机端口：容器端口
	-p 主机端口:容器端口
	-p 容器端口
	
-p 随机指定端口
</code></pre></td></tr></table>
</div>
</div><h4 id="进入退出容器">进入退出容器</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># 进入</span>
docker run -it centos /bin/bash 
<span class="c1"># 查看目录</span>
ls
<span class="c1"># 退出</span>
<span class="nb">exit</span>
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112327.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112327.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112327.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112327.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112327.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112327.png"
    /></p>
<p>注意<strong>这里面主机名，编程了centos的id</strong></p>
<p>这里面就是一个容器，套娃啊</p>
<h4 id="查看运行的容器">查看运行的容器</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback"># 查看正在运行的容器
docker ps
# 查看曾经运行的容器
docker ps -a
# 显示最近创建的容器，设置显示个数
docker ps -a - n=? 
# 只显示容器的编号
docker ps -aq
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># docker ps</span>
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
<span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># docker ps -a</span>
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                     PORTS               NAMES
9939864fa2e6        centos              <span class="s2">&#34;bin/bash&#34;</span>          <span class="m">4</span> minutes ago       Exited <span class="o">(</span>0<span class="o">)</span> <span class="m">4</span> minutes ago                       unruffled_knuth
5f42e9930435        centos              <span class="s2">&#34;/bin/bash&#34;</span>         <span class="m">8</span> minutes ago       Exited <span class="o">(</span>0<span class="o">)</span> <span class="m">4</span> minutes ago                       lucid_cannon
a89ddb393d3d        bf756fb1ae65        <span class="s2">&#34;/hello&#34;</span>            <span class="m">19</span> hours ago        Exited <span class="o">(</span>0<span class="o">)</span> <span class="m">19</span> hours ago                        gracious_bhabha
<span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># docker ps -a -n=2</span>
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                     PORTS               NAMES
9939864fa2e6        centos              <span class="s2">&#34;bin/bash&#34;</span>          <span class="m">6</span> minutes ago       Exited <span class="o">(</span>0<span class="o">)</span> <span class="m">6</span> minutes ago                       unruffled_knuth
5f42e9930435        centos              <span class="s2">&#34;/bin/bash&#34;</span>         <span class="m">10</span> minutes ago      Exited <span class="o">(</span>0<span class="o">)</span> <span class="m">7</span> minutes ago 
<span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># docker ps -aq</span>
9939864fa2e6
5f42e9930435
a89ddb393d3d

</code></pre></td></tr></table>
</div>
</div><h4 id="退出容器">退出容器</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># 容器停止退出</span>
<span class="nb">exit</span>
<span class="c1"># 容器不停止退出 注意必须在英文输入法下，中文输入法不行</span>
Ctrl + P + Q
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># docker run -it centos /bin/bash</span>
<span class="o">[</span>root@bfcea13c40cd /<span class="o">]</span><span class="c1"># [root@192 ~]# docker ps ##注意这里会自动给个命令，删掉</span>
CONTAINER ID        IMAGE               COMMAND             CREATED              STATUS              PORTS               NAMES
bfcea13c40cd        centos              <span class="s2">&#34;/bin/bash&#34;</span>         About a minute ago   Up About a minute                       stoic_wilson
edbd9366d959        centos              <span class="s2">&#34;/bin/bash&#34;</span>         <span class="m">7</span> minutes ago        Up <span class="m">7</span> minutes                            affectionate_bartik
<span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># docker exec -it edbd9366d959 /bin/bash ## 再次进入</span>
<span class="o">[</span>root@edbd9366d959 /<span class="o">]</span><span class="c1"># exit ##停止并推出</span>
<span class="nb">exit</span>

</code></pre></td></tr></table>
</div>
</div><h4 id="删除容器">删除容器</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># 删除指定容器 不能删除正在运行的容器，如果强制删除 rm -f</span>
docker rm 容器id
<span class="c1"># 删除所有容器</span>
docker rm -f <span class="k">$(</span>docker ps -aq<span class="k">)</span>
<span class="c1"># 删除所有容器</span>
docker ps -a -q<span class="p">|</span>xargs docker rm
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># docker ps -a</span>
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                      PORTS               NAMES
bfcea13c40cd        centos              <span class="s2">&#34;/bin/bash&#34;</span>         <span class="m">29</span> minutes ago      Up <span class="m">29</span> minutes                                   stoic_wilson
edbd9366d959        centos              <span class="s2">&#34;/bin/bash&#34;</span>         <span class="m">35</span> minutes ago      Up <span class="m">35</span> minutes                                   affectionate_bartik
9939864fa2e6        centos              <span class="s2">&#34;bin/bash&#34;</span>          <span class="m">48</span> minutes ago      Exited <span class="o">(</span>0<span class="o">)</span> <span class="m">48</span> minutes ago                       unruffled_knuth
5f42e9930435        centos              <span class="s2">&#34;/bin/bash&#34;</span>         <span class="m">52</span> minutes ago      Exited <span class="o">(</span>0<span class="o">)</span> <span class="m">49</span> minutes ago                       lucid_cannon
a89ddb393d3d        bf756fb1ae65        <span class="s2">&#34;/hello&#34;</span>            <span class="m">20</span> hours ago        Exited <span class="o">(</span>0<span class="o">)</span> <span class="m">20</span> hours ago                         gracious_bhabha
<span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># docker rm 5f42e9930435</span>
5f42e9930435
<span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># docker rm edbd9366d959      # 注意正在运行的容器不能删除</span>
Error response from daemon: You cannot remove a running container edbd9366d9596c744dd449119269b04de2f2a494e7fc471f6396bcefd94c33fe. Stop the container before attempting removal or force remove

</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># docker ps -aq # 所有容器id</span>
bfcea13c40cd
edbd9366d959
9939864fa2e6
a89ddb393d3d
<span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># docker rm -f $(docker ps -aq) # 全部删除</span>
bfcea13c40cd
edbd9366d959
9939864fa2e6
a89ddb393d3d

</code></pre></td></tr></table>
</div>
</div><h4 id="启动和停止容器的操作">启动和停止容器的操作</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">docker start
docker restart
docker stop
docker <span class="nb">kill</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># docker run -it centos /bin/bash</span>
<span class="o">[</span>root@7b1a7dd10ea4 /<span class="o">]</span><span class="c1"># exit</span>
<span class="nb">exit</span>
<span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># docker ps #查看正在运行的</span>
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
<span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># docker ps -a # 查看历史运行过的</span>
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                      PORTS               NAMES
7b1a7dd10ea4        centos              <span class="s2">&#34;/bin/bash&#34;</span>         <span class="m">54</span> seconds ago      Exited <span class="o">(</span>0<span class="o">)</span> <span class="m">42</span> seconds ago                       fervent_mirzakhani
<span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># docker start 7b1a7dd10ea4 # 启动当前这个容器 container id 粘过 来</span>
7b1a7dd10ea4
<span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># docker ps # 查看当前运行容器 发现启动成功</span>
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
7b1a7dd10ea4        centos              <span class="s2">&#34;/bin/bash&#34;</span>         <span class="m">2</span> minutes ago       Up <span class="m">28</span> seconds                           fervent_mirzakhani
<span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># docker stop 7b1a7dd10ea4 # 停止运行</span>
7b1a7dd10ea4
<span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># docker ps # 再次查看 没有这个容器了</span>
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES


</code></pre></td></tr></table>
</div>
</div><h3 id="常用其他命令">常用其他命令</h3>
<h4 id="后台启动docker">后台启动docker</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">docker run -d 镜像名
<span class="c1"># 用docker ps 查看的时候 发现停止了</span>

<span class="c1"># 后台运行，docker发现前台没有，容器启动后，发现自己没有提供服务，会立刻停止</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">Last login: Wed Jun <span class="m">17</span> 19:47:35 <span class="m">2020</span>
<span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># systemctl start docker # 关机后重启了，需要启动docker</span>
<span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># docker run -d centos # 运行</span>
8ce188e5fee31c2fac93c0a405ee1a95c38dbc50cb47c35b19c0039c27558ded
<span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># docker ps -a # 查看正在运行的</span>
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                      PORTS               NAMES
8ce188e5fee3        centos              <span class="s2">&#34;/bin/bash&#34;</span>         <span class="m">19</span> seconds ago      Exited <span class="o">(</span>0<span class="o">)</span> <span class="m">18</span> seconds ago                       tender_dirac
7b1a7dd10ea4        centos              <span class="s2">&#34;/bin/bash&#34;</span>         <span class="m">8</span> hours ago         Exited <span class="o">(</span>0<span class="o">)</span> <span class="m">8</span> hours ago                          fervent_mirzakhani

</code></pre></td></tr></table>
</div>
</div><h4 id="查看日志">查看日志</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">docker logs

<span class="c1"># -tf          #显示日志</span>
<span class="c1">#--tail number # 要显示日志条数</span>
docker logs -f -t --tail n 【id】

</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112415.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112415.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112415.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112415.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112415.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112415.png"
    /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># docker logs --help</span>

Usage:	docker logs <span class="o">[</span>OPTIONS<span class="o">]</span> CONTAINER

Fetch the logs of a container

Options:
      --details        Show extra details provided to logs
  -f, --follow         Follow log output
      --since string   Show logs since timestamp <span class="o">(</span>e.g.
                       2013-01-02T13:23:37<span class="o">)</span> or relative
                       <span class="o">(</span>e.g. 42m <span class="k">for</span> <span class="m">42</span> minutes<span class="o">)</span>
      --tail string    Number of lines to show from the
                       end of the logs <span class="o">(</span>default <span class="s2">&#34;all&#34;</span><span class="o">)</span>
  -t, --timestamps     Show timestamps <span class="c1"># 时间戳</span>
      --until string   Show logs before a timestamp <span class="o">(</span>e.g.
                       2013-01-02T13:23:37<span class="o">)</span> or relative
                       <span class="o">(</span>e.g. 42m <span class="k">for</span> <span class="m">42</span> minutes<span class="o">)</span>

</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># 自己编写的一个脚本</span>
whiel true<span class="p">;</span><span class="k">do</span> <span class="nb">echo</span> shenzai<span class="p">;</span>sleep 
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># 运行一个</span>
<span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># docker run -it centos /bin/bash</span>

<span class="o">[</span>root@c2887d35c71d /<span class="o">]</span><span class="c1"># [root@192 ~]# docker ps</span>
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
c2887d35c71d        centos              <span class="s2">&#34;/bin/bash&#34;</span>         <span class="m">57</span> seconds ago      Up <span class="m">56</span> seconds                           vigorous_kare

<span class="c1"># 查看日志，由于没有运行脚本，所以啥也没显示</span>
<span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># docker logs -f -t --tail 10 c2887d35c71d</span>
^C <span class="c1"># ctrl+c退出</span>

<span class="c1"># 运行centos里面加个脚本</span>
<span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># docker run -d centos /bin/sh -c &#34;while true;do echo shenzai;sleep 1;done&#34;</span>
cb6d7fbc3f27a064137d58282de97b97365dea2705211ebfbad642079cc1b388

<span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># docker ps</span>
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS               NAMES
cb6d7fbc3f27        centos              <span class="s2">&#34;/bin/sh -c &#39;while t…&#34;</span>   <span class="m">7</span> seconds ago       Up <span class="m">6</span> seconds                            dreamy_almeida
c2887d35c71d        centos              <span class="s2">&#34;/bin/bash&#34;</span>              <span class="m">3</span> minutes ago       Up <span class="m">3</span> minutes                            vigorous_kare

<span class="c1"># 查看日志 发现隔一秒打印一条</span>
<span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># docker logs -f -t --tail 10 cb6d7fbc3f27</span>
2020-06-17T12:02:11.293765084Z shenzai
2020-06-17T12:02:12.297675608Z shenzai
2020-06-17T12:02:13.301845582Z shenzai
2020-06-17T12:02:14.304800996Z shenzai
2020-06-17T12:02:15.307130238Z shenzai
2020-06-17T12:02:16.310574235Z shenzai
2020-06-17T12:02:17.312946923Z shenzai
2020-06-17T12:02:18.314841295Z shenzai
2020-06-17T12:02:19.317021705Z shenzai
2020-06-17T12:02:20.319670013Z shenzai
2020-06-17T12:02:21.322651649Z shenzai
2020-06-17T12:02:22.325466918Z shenzai
2020-06-17T12:02:23.327984704Z shenzai
2020-06-17T12:02:24.329656919Z shenzai

</code></pre></td></tr></table>
</div>
</div><h4 id="查看容器中进程信息">查看容器中进程信息</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># 命令 docker top 容器id</span>
<span class="c1"># UID：当前用户id PID：父id   PPID：进程ID</span>

UID                 PID                 PPID                C                   STIME     
root                <span class="m">1424</span>                <span class="m">31183</span>               <span class="m">0</span>                   15:13              
root                <span class="m">31183</span>               <span class="m">31163</span>               <span class="m">0</span>                   14:50     
</code></pre></td></tr></table>
</div>
</div><h4 id="查看正在镜像的元数据">查看正在镜像的元数据</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span><span class="lnt">215
</span><span class="lnt">216
</span><span class="lnt">217
</span><span class="lnt">218
</span><span class="lnt">219
</span><span class="lnt">220
</span><span class="lnt">221
</span><span class="lnt">222
</span><span class="lnt">223
</span><span class="lnt">224
</span><span class="lnt">225
</span><span class="lnt">226
</span><span class="lnt">227
</span><span class="lnt">228
</span><span class="lnt">229
</span><span class="lnt">230
</span><span class="lnt">231
</span><span class="lnt">232
</span><span class="lnt">233
</span><span class="lnt">234
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># 命令</span>
docker inspect 容器id

<span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># docker inspect cb6d7fbc3f27</span>
<span class="o">[</span>
    <span class="o">{</span>
        <span class="c1"># 容器的完整id</span>
        <span class="s2">&#34;Id&#34;</span>: <span class="s2">&#34;cb6d7fbc3f27a064137d58282de97b97365dea2705211ebfbad642079cc1b388&#34;</span>,
        
        <span class="c1"># 创建时间</span>
        <span class="s2">&#34;Created&#34;</span>: <span class="s2">&#34;2020-06-17T12:00:50.706906186Z&#34;</span>,
        
        <span class="c1"># 脚本位置</span>
        <span class="s2">&#34;Path&#34;</span>: <span class="s2">&#34;/bin/sh&#34;</span>,
        
        <span class="c1"># 运行的脚本</span>
        <span class="s2">&#34;Args&#34;</span>: <span class="o">[</span>
            <span class="s2">&#34;-c&#34;</span>,
            <span class="s2">&#34;while true;do echo shenzai;sleep 1;done&#34;</span>
        <span class="o">]</span>,
        <span class="s2">&#34;State&#34;</span>: <span class="o">{</span>
            <span class="s2">&#34;Status&#34;</span>: <span class="s2">&#34;running&#34;</span>, <span class="c1"># 状态，正在运行</span>
            <span class="s2">&#34;Running&#34;</span>: true,
            <span class="s2">&#34;Paused&#34;</span>: false,
            <span class="s2">&#34;Restarting&#34;</span>: false,
            <span class="s2">&#34;OOMKilled&#34;</span>: false,
            <span class="s2">&#34;Dead&#34;</span>: false,
            <span class="s2">&#34;Pid&#34;</span>: 1909, <span class="c1"># 父进程id</span>
            <span class="s2">&#34;ExitCode&#34;</span>: 0,
            <span class="s2">&#34;Error&#34;</span>: <span class="s2">&#34;&#34;</span>,
            <span class="s2">&#34;StartedAt&#34;</span>: <span class="s2">&#34;2020-06-17T12:00:51.093617477Z&#34;</span>,
            <span class="s2">&#34;FinishedAt&#34;</span>: <span class="s2">&#34;0001-01-01T00:00:00Z&#34;</span>
        <span class="o">}</span>,
        
        <span class="c1"># 镜像来源 </span>
        <span class="s2">&#34;Image&#34;</span>: <span class="s2">&#34;sha256:831691599b88ad6cc2a4abbd0e89661a121aff14cfa289ad840fd3946f274f1f&#34;</span>,
        <span class="s2">&#34;ResolvConfPath&#34;</span>: <span class="s2">&#34;/var/lib/docker/containers/cb6d7fbc3f27a064137d58282de97b97365dea2705211ebfbad642079cc1b388/resolv.conf&#34;</span>,
        <span class="s2">&#34;HostnamePath&#34;</span>: <span class="s2">&#34;/var/lib/docker/containers/cb6d7fbc3f27a064137d58282de97b97365dea2705211ebfbad642079cc1b388/hostname&#34;</span>,
        <span class="s2">&#34;HostsPath&#34;</span>: <span class="s2">&#34;/var/lib/docker/containers/cb6d7fbc3f27a064137d58282de97b97365dea2705211ebfbad642079cc1b388/hosts&#34;</span>,
        <span class="s2">&#34;LogPath&#34;</span>: <span class="s2">&#34;/var/lib/docker/containers/cb6d7fbc3f27a064137d58282de97b97365dea2705211ebfbad642079cc1b388/cb6d7fbc3f27a064137d58282de97b97365dea2705211ebfbad642079cc1b388-json.log&#34;</span>,
        
        
        <span class="s2">&#34;Name&#34;</span>: <span class="s2">&#34;/dreamy_almeida&#34;</span>,
        <span class="s2">&#34;RestartCount&#34;</span>: 0,
        <span class="s2">&#34;Driver&#34;</span>: <span class="s2">&#34;overlay2&#34;</span>,
        <span class="s2">&#34;Platform&#34;</span>: <span class="s2">&#34;linux&#34;</span>,
        <span class="s2">&#34;MountLabel&#34;</span>: <span class="s2">&#34;&#34;</span>,
        <span class="s2">&#34;ProcessLabel&#34;</span>: <span class="s2">&#34;&#34;</span>,
        <span class="s2">&#34;AppArmorProfile&#34;</span>: <span class="s2">&#34;&#34;</span>,
        <span class="s2">&#34;ExecIDs&#34;</span>: null,
        
        <span class="c1"># 主机配置</span>
        <span class="s2">&#34;HostConfig&#34;</span>: <span class="o">{</span>
            <span class="s2">&#34;Binds&#34;</span>: null,
            <span class="s2">&#34;ContainerIDFile&#34;</span>: <span class="s2">&#34;&#34;</span>,
            <span class="s2">&#34;LogConfig&#34;</span>: <span class="o">{</span>
                <span class="s2">&#34;Type&#34;</span>: <span class="s2">&#34;json-file&#34;</span>,
                <span class="s2">&#34;Config&#34;</span>: <span class="o">{}</span>
            <span class="o">}</span>,
            <span class="s2">&#34;NetworkMode&#34;</span>: <span class="s2">&#34;default&#34;</span>,
            <span class="s2">&#34;PortBindings&#34;</span>: <span class="o">{}</span>,
            <span class="s2">&#34;RestartPolicy&#34;</span>: <span class="o">{</span>
                <span class="s2">&#34;Name&#34;</span>: <span class="s2">&#34;no&#34;</span>,
                <span class="s2">&#34;MaximumRetryCount&#34;</span>: <span class="m">0</span>
            <span class="o">}</span>,
            <span class="s2">&#34;AutoRemove&#34;</span>: false,
            <span class="s2">&#34;VolumeDriver&#34;</span>: <span class="s2">&#34;&#34;</span>,
            <span class="s2">&#34;VolumesFrom&#34;</span>: null,
            <span class="s2">&#34;CapAdd&#34;</span>: null,
            <span class="s2">&#34;CapDrop&#34;</span>: null,
            <span class="s2">&#34;Capabilities&#34;</span>: null,
            <span class="s2">&#34;Dns&#34;</span>: <span class="o">[]</span>,
            <span class="s2">&#34;DnsOptions&#34;</span>: <span class="o">[]</span>,
            <span class="s2">&#34;DnsSearch&#34;</span>: <span class="o">[]</span>,
            <span class="s2">&#34;ExtraHosts&#34;</span>: null,
            <span class="s2">&#34;GroupAdd&#34;</span>: null,
            <span class="s2">&#34;IpcMode&#34;</span>: <span class="s2">&#34;private&#34;</span>,
            <span class="s2">&#34;Cgroup&#34;</span>: <span class="s2">&#34;&#34;</span>,
            <span class="s2">&#34;Links&#34;</span>: null,
            <span class="s2">&#34;OomScoreAdj&#34;</span>: 0,
            <span class="s2">&#34;PidMode&#34;</span>: <span class="s2">&#34;&#34;</span>,
            <span class="s2">&#34;Privileged&#34;</span>: false,
            <span class="s2">&#34;PublishAllPorts&#34;</span>: false,
            <span class="s2">&#34;ReadonlyRootfs&#34;</span>: false,
            <span class="s2">&#34;SecurityOpt&#34;</span>: null,
            <span class="s2">&#34;UTSMode&#34;</span>: <span class="s2">&#34;&#34;</span>,
            <span class="s2">&#34;UsernsMode&#34;</span>: <span class="s2">&#34;&#34;</span>,
            <span class="s2">&#34;ShmSize&#34;</span>: 67108864,
            <span class="s2">&#34;Runtime&#34;</span>: <span class="s2">&#34;runc&#34;</span>,
            <span class="s2">&#34;ConsoleSize&#34;</span>: <span class="o">[</span>
                0,
                <span class="m">0</span>
            <span class="o">]</span>,
            <span class="s2">&#34;Isolation&#34;</span>: <span class="s2">&#34;&#34;</span>,
            <span class="s2">&#34;CpuShares&#34;</span>: 0,
            <span class="s2">&#34;Memory&#34;</span>: 0,
            <span class="s2">&#34;NanoCpus&#34;</span>: 0,
            <span class="s2">&#34;CgroupParent&#34;</span>: <span class="s2">&#34;&#34;</span>,
            <span class="s2">&#34;BlkioWeight&#34;</span>: 0,
            <span class="s2">&#34;BlkioWeightDevice&#34;</span>: <span class="o">[]</span>,
            <span class="s2">&#34;BlkioDeviceReadBps&#34;</span>: null,
            <span class="s2">&#34;BlkioDeviceWriteBps&#34;</span>: null,
            <span class="s2">&#34;BlkioDeviceReadIOps&#34;</span>: null,
            <span class="s2">&#34;BlkioDeviceWriteIOps&#34;</span>: null,
            <span class="s2">&#34;CpuPeriod&#34;</span>: 0,
            <span class="s2">&#34;CpuQuota&#34;</span>: 0,
            <span class="s2">&#34;CpuRealtimePeriod&#34;</span>: 0,
            <span class="s2">&#34;CpuRealtimeRuntime&#34;</span>: 0,
            <span class="s2">&#34;CpusetCpus&#34;</span>: <span class="s2">&#34;&#34;</span>,
            <span class="s2">&#34;CpusetMems&#34;</span>: <span class="s2">&#34;&#34;</span>,
            <span class="s2">&#34;Devices&#34;</span>: <span class="o">[]</span>,
            <span class="s2">&#34;DeviceCgroupRules&#34;</span>: null,
            <span class="s2">&#34;DeviceRequests&#34;</span>: null,
            <span class="s2">&#34;KernelMemory&#34;</span>: 0,
            <span class="s2">&#34;KernelMemoryTCP&#34;</span>: 0,
            <span class="s2">&#34;MemoryReservation&#34;</span>: 0,
            <span class="s2">&#34;MemorySwap&#34;</span>: 0,
            <span class="s2">&#34;MemorySwappiness&#34;</span>: null,
            <span class="s2">&#34;OomKillDisable&#34;</span>: false,
            <span class="s2">&#34;PidsLimit&#34;</span>: null,
            <span class="s2">&#34;Ulimits&#34;</span>: null,
            <span class="s2">&#34;CpuCount&#34;</span>: 0,
            <span class="s2">&#34;CpuPercent&#34;</span>: 0,
            <span class="s2">&#34;IOMaximumIOps&#34;</span>: 0,
            <span class="s2">&#34;IOMaximumBandwidth&#34;</span>: 0,
            <span class="s2">&#34;MaskedPaths&#34;</span>: <span class="o">[</span>
                <span class="s2">&#34;/proc/asound&#34;</span>,
                <span class="s2">&#34;/proc/acpi&#34;</span>,
                <span class="s2">&#34;/proc/kcore&#34;</span>,
                <span class="s2">&#34;/proc/keys&#34;</span>,
                <span class="s2">&#34;/proc/latency_stats&#34;</span>,
                <span class="s2">&#34;/proc/timer_list&#34;</span>,
                <span class="s2">&#34;/proc/timer_stats&#34;</span>,
                <span class="s2">&#34;/proc/sched_debug&#34;</span>,
                <span class="s2">&#34;/proc/scsi&#34;</span>,
                <span class="s2">&#34;/sys/firmware&#34;</span>
            <span class="o">]</span>,
            <span class="s2">&#34;ReadonlyPaths&#34;</span>: <span class="o">[</span>
                <span class="s2">&#34;/proc/bus&#34;</span>,
                <span class="s2">&#34;/proc/fs&#34;</span>,
                <span class="s2">&#34;/proc/irq&#34;</span>,
                <span class="s2">&#34;/proc/sys&#34;</span>,
                <span class="s2">&#34;/proc/sysrq-trigger&#34;</span>
            <span class="o">]</span>
        <span class="o">}</span>,
        
        <span class="c1"># 其他配置</span>
        <span class="s2">&#34;GraphDriver&#34;</span>: <span class="o">{</span>
            <span class="s2">&#34;Data&#34;</span>: <span class="o">{</span>
                <span class="s2">&#34;LowerDir&#34;</span>: <span class="s2">&#34;/var/lib/docker/overlay2/3675586ebbd79cd72d2562a90c9380627a331c563724c0dac091f92600af4907-init/diff:/var/lib/docker/overlay2/7f79322e0f58d651a84a555dadd83d92537788172525945d3f538dd95dce336c/diff&#34;</span>,
                <span class="s2">&#34;MergedDir&#34;</span>: <span class="s2">&#34;/var/lib/docker/overlay2/3675586ebbd79cd72d2562a90c9380627a331c563724c0dac091f92600af4907/merged&#34;</span>,
                <span class="s2">&#34;UpperDir&#34;</span>: <span class="s2">&#34;/var/lib/docker/overlay2/3675586ebbd79cd72d2562a90c9380627a331c563724c0dac091f92600af4907/diff&#34;</span>,
                <span class="s2">&#34;WorkDir&#34;</span>: <span class="s2">&#34;/var/lib/docker/overlay2/3675586ebbd79cd72d2562a90c9380627a331c563724c0dac091f92600af4907/work&#34;</span>
            <span class="o">}</span>,
            <span class="s2">&#34;Name&#34;</span>: <span class="s2">&#34;overlay2&#34;</span>
        <span class="o">}</span>,
        
        <span class="s2">&#34;Mounts&#34;</span>: <span class="o">[]</span>, <span class="c1"># 挂载</span>
        
        <span class="c1"># 基本配置</span>
        <span class="s2">&#34;Config&#34;</span>: <span class="o">{</span>
            <span class="s2">&#34;Hostname&#34;</span>: <span class="s2">&#34;cb6d7fbc3f27&#34;</span>,
            <span class="s2">&#34;Domainname&#34;</span>: <span class="s2">&#34;&#34;</span>,
            <span class="s2">&#34;User&#34;</span>: <span class="s2">&#34;&#34;</span>,
            <span class="s2">&#34;AttachStdin&#34;</span>: false,
            <span class="s2">&#34;AttachStdout&#34;</span>: false,
            <span class="s2">&#34;AttachStderr&#34;</span>: false,
            <span class="s2">&#34;Tty&#34;</span>: false,
            <span class="s2">&#34;OpenStdin&#34;</span>: false,
            <span class="s2">&#34;StdinOnce&#34;</span>: false,
            <span class="s2">&#34;Env&#34;</span>: <span class="o">[</span>
                <span class="s2">&#34;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&#34;</span>
            <span class="o">]</span>, <span class="c1"># 基本环境变量，这里没有Java</span>
            
            <span class="c1"># 基本命令</span>
            <span class="s2">&#34;Cmd&#34;</span>: <span class="o">[</span>
                <span class="s2">&#34;/bin/sh&#34;</span>,
                <span class="s2">&#34;-c&#34;</span>,
                <span class="s2">&#34;while true;do echo shenzai;sleep 1;done&#34;</span>
            <span class="o">]</span>,
            <span class="s2">&#34;Image&#34;</span>: <span class="s2">&#34;centos&#34;</span>,
            <span class="s2">&#34;Volumes&#34;</span>: null,
            <span class="s2">&#34;WorkingDir&#34;</span>: <span class="s2">&#34;&#34;</span>,
            <span class="s2">&#34;Entrypoint&#34;</span>: null,
            <span class="s2">&#34;OnBuild&#34;</span>: null,
            <span class="s2">&#34;Labels&#34;</span>: <span class="o">{</span>
                <span class="s2">&#34;org.label-schema.build-date&#34;</span>: <span class="s2">&#34;20200611&#34;</span>,
                <span class="s2">&#34;org.label-schema.license&#34;</span>: <span class="s2">&#34;GPLv2&#34;</span>,
                <span class="s2">&#34;org.label-schema.name&#34;</span>: <span class="s2">&#34;CentOS Base Image&#34;</span>,
                <span class="s2">&#34;org.label-schema.schema-version&#34;</span>: <span class="s2">&#34;1.0&#34;</span>,
                <span class="s2">&#34;org.label-schema.vendor&#34;</span>: <span class="s2">&#34;CentOS&#34;</span>
            <span class="o">}</span>
        <span class="o">}</span>,
        
        <span class="c1"># 网卡，比如现在用的是桥接的网卡</span>
        <span class="s2">&#34;NetworkSettings&#34;</span>: <span class="o">{</span>
            <span class="s2">&#34;Bridge&#34;</span>: <span class="s2">&#34;&#34;</span>,
            <span class="s2">&#34;SandboxID&#34;</span>: <span class="s2">&#34;4d701985d7e77aa153790b697b2f38a61e20555c224b7675e4bf650b82799882&#34;</span>,
            <span class="s2">&#34;HairpinMode&#34;</span>: false,
            <span class="s2">&#34;LinkLocalIPv6Address&#34;</span>: <span class="s2">&#34;&#34;</span>,
            <span class="s2">&#34;LinkLocalIPv6PrefixLen&#34;</span>: 0,
            <span class="s2">&#34;Ports&#34;</span>: <span class="o">{}</span>,
            <span class="s2">&#34;SandboxKey&#34;</span>: <span class="s2">&#34;/var/run/docker/netns/4d701985d7e7&#34;</span>,
            <span class="s2">&#34;SecondaryIPAddresses&#34;</span>: null,
            <span class="s2">&#34;SecondaryIPv6Addresses&#34;</span>: null,
            <span class="s2">&#34;EndpointID&#34;</span>: <span class="s2">&#34;8a6c71e2bafb19ca7dfd85445ccc4bef6d17467360a243d624089e676a24a018&#34;</span>,
            <span class="s2">&#34;Gateway&#34;</span>: <span class="s2">&#34;172.17.0.1&#34;</span>,
            <span class="s2">&#34;GlobalIPv6Address&#34;</span>: <span class="s2">&#34;&#34;</span>,
            <span class="s2">&#34;GlobalIPv6PrefixLen&#34;</span>: 0,
            <span class="s2">&#34;IPAddress&#34;</span>: <span class="s2">&#34;172.17.0.3&#34;</span>,
            <span class="s2">&#34;IPPrefixLen&#34;</span>: 16,
            <span class="s2">&#34;IPv6Gateway&#34;</span>: <span class="s2">&#34;&#34;</span>,
            <span class="s2">&#34;MacAddress&#34;</span>: <span class="s2">&#34;02:42:ac:11:00:03&#34;</span>,
            <span class="s2">&#34;Networks&#34;</span>: <span class="o">{</span>
                <span class="s2">&#34;bridge&#34;</span>: <span class="o">{</span>
                    <span class="s2">&#34;IPAMConfig&#34;</span>: null,
                    <span class="s2">&#34;Links&#34;</span>: null,
                    <span class="s2">&#34;Aliases&#34;</span>: null,
                    <span class="s2">&#34;NetworkID&#34;</span>: <span class="s2">&#34;22b0fd2290ccbc4e066a75d3f01bd8bf32ee4352c5bbcfc9f911287219219571&#34;</span>,
                    <span class="s2">&#34;EndpointID&#34;</span>: <span class="s2">&#34;8a6c71e2bafb19ca7dfd85445ccc4bef6d17467360a243d624089e676a24a018&#34;</span>,
                    <span class="s2">&#34;Gateway&#34;</span>: <span class="s2">&#34;172.17.0.1&#34;</span>,
                    <span class="s2">&#34;IPAddress&#34;</span>: <span class="s2">&#34;172.17.0.3&#34;</span>,
                    <span class="s2">&#34;IPPrefixLen&#34;</span>: 16,
                    <span class="s2">&#34;IPv6Gateway&#34;</span>: <span class="s2">&#34;&#34;</span>,
                    <span class="s2">&#34;GlobalIPv6Address&#34;</span>: <span class="s2">&#34;&#34;</span>,
                    <span class="s2">&#34;GlobalIPv6PrefixLen&#34;</span>: 0,
                    <span class="s2">&#34;MacAddress&#34;</span>: <span class="s2">&#34;02:42:ac:11:00:03&#34;</span>,
                    <span class="s2">&#34;DriverOpts&#34;</span>: null
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">]</span>

</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># 停止正在疯狂输出的那个容器</span>
<span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># docker stop cb6d7fbc3f27</span>
cb6d7fbc3f27
</code></pre></td></tr></table>
</div>
</div><h4 id="进入当前正在运行的容器">进入当前正在运行的容器</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># 我们通常容器都是使用后台方式运行的e</span>

docker <span class="nb">exec</span> -it 容器id bashSHELL

<span class="c1"># 测试</span>
<span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># docker ps</span>
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
c2887d35c71d        centos              <span class="s2">&#34;/bin/bash&#34;</span>         <span class="m">35</span> minutes ago      Up <span class="m">35</span> minutes                           vigorous_kare
<span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># docker exec -it c2887d35c71d /bin/bash</span>
<span class="o">[</span>root@c2887d35c71d /<span class="o">]</span><span class="c1"># ls</span>
bin  etc   lib	  lost+found  mnt  proc  run   srv  tmp  var
dev  home  lib64  media       opt  root  sbin  sys  usr
<span class="o">[</span>root@c2887d35c71d /<span class="o">]</span><span class="c1"># ps -ef</span>
UID         PID   PPID  C STIME TTY          TIME CMD
root          <span class="m">1</span>      <span class="m">0</span>  <span class="m">0</span> 11:57 pts/0    00:00:00 /bin/bash
root         <span class="m">14</span>      <span class="m">0</span>  <span class="m">0</span> 12:32 pts/1    00:00:00 /bin/bash
root         <span class="m">28</span>     <span class="m">14</span>  <span class="m">0</span> 12:32 pts/1    00:00:00 ps -ef
<span class="o">[</span>root@c2887d35c71d /<span class="o">]</span><span class="c1"># c2887d35c71d</span>
<span class="o">[</span>root@c2887d35c71d /<span class="o">]</span><span class="c1"># exit</span>
<span class="nb">exit</span>

<span class="c1"># 方式二</span>
<span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># docker attach c2887d35c71d</span>
<span class="o">[</span>root@c2887d35c71d /<span class="o">]</span><span class="c1"># </span>

<span class="c1"># 区别</span>
<span class="c1"># docker exec # 进入容器后开启一个新的终端，可以在里面操作(常用)</span>
<span class="c1"># docker attach 进入容器正在执行的终端，不会启动新的进程</span>

</code></pre></td></tr></table>
</div>
</div><h4 id="从容器内拷贝文件到主机上">从容器内拷贝文件到主机上</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">docker cp 容器id:容器内路径  目的的主机路径

<span class="c1"># 运行</span>
<span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># docker run -it centos</span>
<span class="c1"># ctrl P Q 不关闭退出，查看</span>
<span class="o">[</span>root@0569081aa89c /<span class="o">]</span><span class="c1"># [root@192 ~]# docker ps</span>
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
0569081aa89c        centos              <span class="s2">&#34;/bin/bash&#34;</span>         <span class="m">19</span> seconds ago      Up <span class="m">19</span> seconds    
hopeful_chebyshev

<span class="c1"># 查看主机home下无文件</span>
<span class="o">[</span>root@192 ~<span class="o">]</span><span class="c1"># cd /home</span>
<span class="o">[</span>root@192 home<span class="o">]</span><span class="c1"># ls</span>

<span class="c1"># 进入正在运行的容器</span>
<span class="o">[</span>root@192 home<span class="o">]</span><span class="c1"># docker attach 0569081aa89c</span>

<span class="c1"># 进入容器home目录</span>
<span class="o">[</span>root@0569081aa89c /<span class="o">]</span><span class="c1"># cd /home</span>

<span class="c1"># 在容器目录中创建java文件</span>
<span class="o">[</span>root@0569081aa89c home<span class="o">]</span><span class="c1"># touch test.java</span>

<span class="c1"># 退出并停止容器</span>
<span class="o">[</span>root@0569081aa89c home<span class="o">]</span><span class="c1"># exit</span>
<span class="nb">exit</span>

<span class="c1"># 查看现在运行的容器</span>
<span class="o">[</span>root@192 home<span class="o">]</span><span class="c1"># docker ps</span>
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES

<span class="c1"># 容器虽然被停止，但是数据都会保留</span>
<span class="o">[</span>root@192 home<span class="o">]</span><span class="c1"># docker ps -a</span>
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                         PORTS               NAMES
0569081aa89c        centos              <span class="s2">&#34;/bin/bash&#34;</span>              <span class="m">3</span> minutes ago       Exited <span class="o">(</span>0<span class="o">)</span> <span class="m">8</span> seconds ago                           hopeful_chebyshev
f589e5684a01        centos              <span class="s2">&#34;/bin/bash&#34;</span>              <span class="m">44</span> minutes ago      Exited <span class="o">(</span>0<span class="o">)</span> <span class="m">44</span> minutes ago                          cranky_easley
cb6d7fbc3f27        centos              <span class="s2">&#34;/bin/sh -c &#39;while t…&#34;</span>   <span class="m">54</span> minutes ago      Exited <span class="o">(</span>137<span class="o">)</span> <span class="m">42</span> minutes ago                        dreamy_almeida
c2887d35c71d        centos              <span class="s2">&#34;/bin/bash&#34;</span>              <span class="m">58</span> minutes ago      Exited <span class="o">(</span>127<span class="o">)</span> <span class="m">16</span> minutes ago                        vigorous_kare
8ce188e5fee3        centos              <span class="s2">&#34;/bin/bash&#34;</span>              About an hour ago   Exited <span class="o">(</span>0<span class="o">)</span> About an hour ago                       tender_dirac
7b1a7dd10ea4        centos              <span class="s2">&#34;/bin/bash&#34;</span>              <span class="m">9</span> hours ago         Exited <span class="o">(</span>0<span class="o">)</span> <span class="m">9</span> hours ago                             fervent_mirzakhani

<span class="c1"># 将容器数据拷贝到主机上</span>
<span class="o">[</span>root@192 home<span class="o">]</span><span class="c1"># docker cp 0569081aa89c:/home/test.java /home</span>
<span class="o">[</span>root@192 home<span class="o">]</span><span class="c1"># ls</span>
test.java

<span class="c1"># 拷贝是一个手动过程，未来我们使用 -v 卷的技术，可以实现自动同步 /home /home</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="查看内容占用">查看内容占用</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">docker stats
</code></pre></td></tr></table>
</div>
</div><h4 id="小结">小结</h4>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112511.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112511.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112511.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112511.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112511.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601112511.png"
    /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>root@192 home<span class="o">]</span><span class="c1"># docker --help</span>

Usage:	docker <span class="o">[</span>OPTIONS<span class="o">]</span> COMMAND

A self-sufficient runtime <span class="k">for</span> containers

Options:
      --config string      Location of client config
                           files <span class="o">(</span>default <span class="s2">&#34;/root/.docker&#34;</span><span class="o">)</span>
  -c, --context string     Name of the context to use to
                           connect to the daemon
                           <span class="o">(</span>overrides DOCKER_HOST env var
                           and default context <span class="nb">set</span> with
                           <span class="s2">&#34;docker context use&#34;</span><span class="o">)</span>
  -D, --debug              Enable debug mode
  -H, --host list          Daemon socket<span class="o">(</span>s<span class="o">)</span> to connect to
  -l, --log-level string   Set the logging level
                           <span class="o">(</span><span class="s2">&#34;debug&#34;</span><span class="p">|</span><span class="s2">&#34;info&#34;</span><span class="p">|</span><span class="s2">&#34;warn&#34;</span><span class="p">|</span><span class="s2">&#34;error&#34;</span><span class="p">|</span><span class="s2">&#34;fatal&#34;</span><span class="o">)</span> <span class="o">(</span>default <span class="s2">&#34;info&#34;</span><span class="o">)</span>
      --tls                Use TLS<span class="p">;</span> implied by --tlsverify
      --tlscacert string   Trust certs signed only by
                           this CA <span class="o">(</span>default
                           <span class="s2">&#34;/root/.docker/ca.pem&#34;</span><span class="o">)</span>
      --tlscert string     Path to TLS certificate file
                           <span class="o">(</span>default <span class="s2">&#34;/root/.docker/cert.pem&#34;</span><span class="o">)</span>
      --tlskey string      Path to TLS key file <span class="o">(</span>default
                           <span class="s2">&#34;/root/.docker/key.pem&#34;</span><span class="o">)</span>
      --tlsverify          Use TLS and verify the remote
  -v, --version            Print version information and quit

Management Commands:
  builder     Manage builds
  config      Manage Docker configs
  container   Manage containers
  context     Manage contexts
  engine      Manage the docker engine
  image       Manage images
  network     Manage networks
  node        Manage Swarm nodes
  plugin      Manage plugins
  secret      Manage Docker secrets
  service     Manage services
  stack       Manage Docker stacks
  swarm       Manage Swarm
  system      Manage Docker
  trust       Manage trust on Docker images
  volume      Manage volumes

Commands:
  attach      Attach <span class="nb">local</span> standard input, output, and error streams to a running container
  build       Build an image from a Dockerfile
  commit      Create a new image from a container<span class="s1">&#39;s changes
</span><span class="s1">  cp          Copy files/folders between a container and the local filesystem
</span><span class="s1">  create      Create a new container
</span><span class="s1">  diff        Inspect changes to files or directories on a container&#39;</span>s filesystem
  events      Get real <span class="nb">time</span> events from the server
  <span class="nb">exec</span>        Run a <span class="nb">command</span> in a running container
  <span class="nb">export</span>      Export a container<span class="err">&#39;</span>s filesystem as a tar archive
  <span class="nb">history</span>     Show the <span class="nb">history</span> of an image
  images      List images
  import      Import the contents from a tarball to create a filesystem image
  info        Display system-wide information
  inspect     Return low-level information on Docker objects
  <span class="nb">kill</span>        Kill one or more running containers
  load        Load an image from a tar archive or STDIN
  login       Log in to a Docker registry
  <span class="nb">logout</span>      Log out from a Docker registry
  logs        Fetch the logs of a container
  pause       Pause all processes within one or more containers
  port        List port mappings or a specific mapping <span class="k">for</span> the container
  ps          List containers
  pull        Pull an image or a repository from a registry
  push        Push an image or a repository to a registry
  rename      Rename a container
  restart     Restart one or more containers
  rm          Remove one or more containers
  rmi         Remove one or more images
  run         Run a <span class="nb">command</span> in a new container
  save        Save one or more images to a tar archive <span class="o">(</span>streamed to STDOUT by default<span class="o">)</span>
  search      Search the Docker Hub <span class="k">for</span> images
  start       Start one or more stopped containers
  stats       Display a live stream of container<span class="o">(</span>s<span class="o">)</span> resource usage statistics
  stop        Stop one or more running containers
  tag         Create a tag TARGET_IMAGE that refers to SOURCE_IMAGE
  top         Display the running processes of a container
  unpause     Unpause all processes within one or more containers
  update      Update configuration of one or more containers
  version     Show the Docker version information
  <span class="nb">wait</span>        Block <span class="k">until</span> one or more containers stop, <span class="k">then</span> print their <span class="nb">exit</span> codes

</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113054.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113054.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113054.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113054.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113054.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113054.png"
    /></p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113124.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113124.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113124.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113124.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113124.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113124.png"
    /></p>
<h4 id="作业练习">作业练习</h4>
<h5 id="部署nginx">部署Nginx</h5>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113145.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113145.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113145.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113145.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113145.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113145.png"
    /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># 官网搜索nginx，可以看到帮助文档</span>

<span class="c1"># 下载镜像</span>
<span class="o">[</span>root@192 home<span class="o">]</span><span class="c1"># docker pull nginx</span>
Using default tag: latest
latest: Pulling from library/nginx
8559a31e96f4: Pull <span class="nb">complete</span> 
8d69e59170f7: Pull <span class="nb">complete</span> 
3f9f1ec1d262: Pull <span class="nb">complete</span> 
d1f5ff4f210d: Pull <span class="nb">complete</span> 
1e22bfa8652e: Pull <span class="nb">complete</span> 
Digest: sha256:21f32f6c08406306d822a0e6e8b7dc81f53f336570e852e25fbe1e3e3d0d0133
Status: Downloaded newer image <span class="k">for</span> nginx:latest
docker.io/library/nginx:latest

<span class="c1"># 查看镜像</span>
<span class="o">[</span>root@192 home<span class="o">]</span><span class="c1"># docker images</span>
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
centos              latest              831691599b88        <span class="m">13</span> hours ago        215MB
nginx               latest              2622e6cca7eb        <span class="m">7</span> days ago          132MB

<span class="c1"># 运行测试</span>
<span class="c1"># -d 后台运行，--name 命名，-p 暴露端口，3344服务器、宿主机的端口，容器内部端口</span>
<span class="o">[</span>root@192 home<span class="o">]</span><span class="c1"># docker run -d --name nginx01 -p:3344:80 nginx</span>
38dbf7bdcaef232d269b7184d91e44e06087181b5ee929494e177ad526810fa8
<span class="o">[</span>root@192 home<span class="o">]</span><span class="c1"># docker ps</span>
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES
38dbf7bdcaef        nginx               <span class="s2">&#34;/docker-entrypoint.…&#34;</span>   <span class="m">7</span> seconds ago       Up <span class="m">6</span> seconds        0.0.0.0:3344-&gt;80/tcp   nginx01

<span class="c1"># 使用3344可以访问成功</span>
<span class="o">[</span>root@192 home<span class="o">]</span><span class="c1"># curl localhost:3344</span>
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Welcome to nginx!&lt;/title&gt;
&lt;style&gt;
    body <span class="o">{</span>
        width: 35em<span class="p">;</span>
        margin: <span class="m">0</span> auto<span class="p">;</span>
        font-family: Tahoma, Verdana, Arial, sans-serif<span class="p">;</span>
    <span class="o">}</span>
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;
&lt;p&gt;If you see this page, the nginx web server is successfully installed and
working. Further configuration is required.&lt;/p&gt;

&lt;p&gt;For online documentation and support please refer to
&lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&#34;http://nginx.org/&#34;</span>&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;
Commercial support is available at
&lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&#34;http://nginx.com/&#34;</span>&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Thank you <span class="k">for</span> using nginx.&lt;/em&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;

</code></pre></td></tr></table>
</div>
</div><p>端口暴露</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113202.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113202.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113202.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113202.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113202.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113202.png"
    /></p>
<p>可以公网访问</p>
<p>找到服务器地址</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113216.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113216.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113216.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113216.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113216.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113216.png"
    /></p>
<p>浏览器输入 192.168.147.132:3344/</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113233.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113233.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113233.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113233.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113233.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113233.png"
    /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>root@192 home<span class="o">]</span><span class="c1"># docker ps</span>
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES
38dbf7bdcaef        nginx               <span class="s2">&#34;/docker-entrypoint.…&#34;</span>   <span class="m">21</span> minutes ago      Up <span class="m">21</span> minutes       0.0.0.0:3344-&gt;80/tcp   nginx01

<span class="c1"># 进入容器</span>
<span class="o">[</span>root@192 home<span class="o">]</span><span class="c1"># docker exec -it nginx01 /bin/bash</span>

<span class="c1"># 查一下nginx在哪</span>
root@38dbf7bdcaef:/# whereis nginx
nginx: /usr/sbin/nginx /usr/lib/nginx /etc/nginx /usr/share/nginx

<span class="c1"># 到这个目录</span>
root@38dbf7bdcaef:/# <span class="nb">cd</span> /etc/nginx
root@38dbf7bdcaef:/etc/nginx# ls
conf.d		koi-utf  mime.types  nginx.conf   uwsgi_params
fastcgi_params	koi-win  modules     scgi_params  win-utf

<span class="c1"># 退出</span>
root@38dbf7bdcaef:/etc/nginx# <span class="nb">exit</span>
<span class="nb">exit</span>

<span class="c1"># 停止</span>
<span class="o">[</span>root@192 home<span class="o">]</span><span class="c1"># docker stop 38dbf7bdcaef</span>
38dbf7bdcaef


</code></pre></td></tr></table>
</div>
</div><p>再次刷新网页，服务关闭</p>
<p>思考问题：每次改动nginx配置文件，都需要进入容器内部，十分麻烦，要是可以在容器外部提供一个映射路径，达到在容器外修改文件名，容器内部就可以自动修改？-v 数据卷技术！</p>
<h5 id="部署tomcat">部署tomcat</h5>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113252.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113252.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113252.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113252.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113252.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113252.png"
    /></p>
<p>在docker hub上查看版本号和使用方法</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113304.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113304.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113304.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113304.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113304.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113304.png"
    /></p>
<p>官方文档一定要翻烂，超多版本，我的天呐~</p>
<h6 id="官方方法">官方方法</h6>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">docker run -it --rm tomcat:9.0

<span class="c1"># docker run 可以不用pull，能自动下载</span>
<span class="c1"># -it 直接进去运行</span>
<span class="c1"># --rm 是什么意思？入门的意思？</span>
<span class="c1"># 我们之前的启动都是后台，停止了容器之后，容器还是可以查到</span>
<span class="c1"># 写了--rm，类似阅后即焚模式，用完即删除，这种通常用来测试</span>

<span class="c1"># 最后冒号查好的版本号</span>
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113323.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113323.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113323.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113323.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113323.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113323.png"
    /></p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113336.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113336.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113336.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113336.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113336.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113336.png"
    /></p>
<p>ctrl+c退出</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">docker ps -a
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113351.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113351.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113351.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113351.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113351.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113351.png"
    /></p>
<pre><code>可以看到并没有tomcat，印证阅后即焚模式，容器会删除，镜像不会删除
</code></pre>
<p>平时不建议这样搞</p>
<h6 id="正常方法">正常方法</h6>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">docker pull tomcat:9.0 <span class="c1"># 之前下过了，应该不用下了，这里老师讲错了</span>
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113408.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113408.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113408.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113408.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113408.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113408.png"
    /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># 启动运行，应该加上版本号</span>
docker run -d -p 3355:8080 --name tomcat01 tomcat
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113425.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113425.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113425.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113425.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113425.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113425.png"
    /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># 进入容器</span>
docker <span class="nb">exec</span> -it tomcat01 /bin/bash
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113438.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113438.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113438.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113438.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113438.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113438.png"
    /></p>
<p>发现问题</p>
<ol>
<li>linux命令少了</li>
<li>没有webapps</li>
</ol>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113452.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113452.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113452.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113452.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113452.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113452.png"
    /></p>
<p>这是阿里云镜像的原因：默认使用最小镜像，所有不必要的都剔除了，保证最小可运行环境</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113506.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113506.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113506.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113506.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113506.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113506.png"
    /></p>
<p>再次找到结构</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113523.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113523.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113523.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113523.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113523.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113523.png"
    /></p>
<p>在浏览器中输入：http://192.168.147.132:3355/</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113537.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113537.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113537.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113537.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113537.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113537.png"
    /></p>
<p>思考问题：</p>
<pre><code>我们以后部署项目，如果每次都要进入容器是不是身份麻烦？我要是可以在容器外部提供一个映射路径，webapps，我们在外部放置项目，就自动同步到内部就好了！
</code></pre>
<p>docker容器 tomcat+网站</p>
<p>docker mysql</p>
<h5 id="部署eskibana">部署es+kibana</h5>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113548.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113548.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113548.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113548.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113548.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113548.png"
    /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># es 暴露的端口很多</span>
<span class="c1"># es 十分耗内存</span>
<span class="c1"># es 的数据一般需要放置到安全目录！挂载</span>

<span class="c1"># 启动 elasticsearch</span>
$ docker run -d --name elasticsearch01 -p 9200:9200 -p 9300:9300 -e <span class="s2">&#34;discovery.type=single-node&#34;</span> elasticsearch:7.6.2

<span class="c1"># 查看内存占用情况</span>
docker stats
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113612.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113612.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113612.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113612.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113612.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113612.png"
    /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># 先感觉stop一下</span>
docker stop ba18713ca536
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113624.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113624.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113624.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113624.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113624.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113624.png"
    /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># 通过 -e 限制内存</span>
$ docker run -d --name elasticsearch02 -p 9200:9200 -p 9300:9300 -e <span class="s2">&#34;discovery.type=single-node&#34;</span> -e <span class="nv">ES_JAVA_OPTS</span><span class="o">=</span>“-Xms64m -Xmx512m” elasticsearch:7.6.2
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113637.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113637.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113637.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113637.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113637.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113637.png"
    /></p>
<p>没成功啊，谁能告诉我为啥！！</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">docker run -d --name elasticsearch02 -p 9200:9200 -p 9300:9300 -e <span class="s2">&#34;discovery.type=single-node&#34;</span> -e <span class="nv">ES_JAVA_OPTS</span><span class="o">=</span><span class="s2">&#34;-Xms64m -Xmx512m&#34;</span> elasticsearch:7.6.2
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>py0003null大佬:
“ES_JAVA_OPTS=-Xms64m -Xmx512m”</p>
<p>py0003null大佬:
引号提前试试</p>
</blockquote>
<p>原因是引号！！你没觉得怪怪的嘛</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113657.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113657.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113657.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113657.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113657.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113657.png"
    /></p>
<p>此时查看stats，发现内存占用在控制范围内</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113707.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113707.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113707.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113707.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113707.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113707.png"
    /></p>
<p>ctrl + C退出，记得stop</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113724.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113724.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113724.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113724.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113724.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113724.png"
    /></p>
<h5 id="思考用kibana链接elasticsearch">思考：用kibana链接elasticsearch</h5>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113737.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113737.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113737.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113737.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113737.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113737.png"
    /></p>
<h3 id="可视化">可视化</h3>
<ul>
<li>portainer(先用这个)</li>
<li>Rancher(CI/CD时用)</li>
</ul>
<h4 id="portainer">portainer</h4>
<p>Docker图像化界面管理工具，提供一个后台面板供我们操作！</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">docker run -d -p 8088:9000 --restart<span class="o">=</span>always -v /var/run/docker.sock:/var/run/docker --privileged<span class="o">=</span><span class="nb">true</span> portainer/portainer
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113751.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113751.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113751.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113751.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113751.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113751.png"
    /></p>
<p>访问外网8088</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113804.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113804.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113804.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113804.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113804.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113804.png"
    /></p>
<p>用户名</p>
<p>密码</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113836.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113836.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113836.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113836.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113836.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113836.png"
    /></p>
<p>【中午吃饭重连了一下，失败，不知道发生了啥】</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113905.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113905.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113905.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113905.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113905.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113905.png"
    /></p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113918.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113918.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113918.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113918.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113918.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113918.png"
    /></p>
<p>【平时不会用这个，好吧，先往下】</p>
<h3 id="heading"></h3>
<h2 id="docker镜像">Docker镜像</h2>
<h3 id="原理">原理</h3>
<p>UnionFS 联合文件系统</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113935.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113935.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113935.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113935.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113935.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113935.png"
    /></p>
<p>bootfs：boot file system</p>
<p>rootfs：root file system</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113950.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113950.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113950.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113950.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113950.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601113950.png"
    /></p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114009.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114009.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114009.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114009.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114009.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114009.png"
    /></p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114023.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114023.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114023.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114023.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114023.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114023.png"
    /></p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114037.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114037.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114037.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114037.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114037.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114037.png"
    /></p>
<p>Docker镜像都是只读的，当容器启动时，一个新的可写层被加到镜像的顶部，这一层就是我们通常说的容器层，容器层之下的都叫镜像层</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114057.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114057.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114057.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114057.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114057.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114057.png"
    /></p>
<h3 id="commit提交镜像">commit提交镜像</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">docker commit <span class="c1"># 提交容器成为一个新的副本</span>
docker commit -m<span class="o">=</span><span class="s2">&#34;提交的描述信息&#34;</span> -a<span class="o">=</span><span class="s2">&#34;作者&#34;</span> 容器id 目标镜像名：<span class="o">[</span>TAG<span class="o">]</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">docker images
docker run -it -p 8080:8080 tomcat
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114113.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114113.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114113.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114113.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114113.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114113.png"
    /></p>
<p>这是一个前台程序</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114126.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114126.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114126.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114126.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114126.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114126.png"
    /></p>
<p>将webapps.dist里面所有的文件拷贝到webapps里面，其中-r必须有，表示目录递归拷贝</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114136.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114136.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114136.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114136.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114136.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114136.png"
    /></p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114147.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114147.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114147.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114147.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114147.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114147.png"
    /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">docker commit -a<span class="o">=</span><span class="s2">&#34;paidaxing&#34;</span> -m<span class="o">=</span><span class="s2">&#34;add webapps app&#34;</span> 当前容器的id tomcat02:1.0
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114204.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114204.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114204.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114204.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114204.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114204.png"
    /></p>
<p>发现新的版本，比之前的大了一些，因为里面记录了我们的改动</p>
<blockquote>
<p>如果想保存当前容器的状态，可以通过commit提交，获得一个镜像</p>
<p>好比我们以前学习VM的时候的快照</p>
<p>到这里算是入门了</p>
<p>接下来三个部分是docker的精髓</p>
</blockquote>
<h2 id="容器数据卷">容器数据卷</h2>
<h3 id="什么是容器卷">什么是容器卷</h3>
<p>docker是要将应用和环境打包成一个镜像，这样，数据就不应该在容器中，否则容</p>
<p>器删除，数据就会丢失，这就是删库跑路，故容器之间要有一个数据共享技术</p>
<p>在Docker容器中产生的数据，同步到本地，这就是卷技术，本质上是一个目录挂</p>
<p>载，将容器内的目录挂载到虚拟机上</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114219.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114219.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114219.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114219.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114219.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114219.png"
    /></p>
<p>目的：</p>
<ul>
<li>
<p>容器的持久化和同步操作</p>
</li>
<li>
<p>容器间可以数据共享</p>
</li>
</ul>
<h3 id="使用数据卷">使用数据卷</h3>
<p>方式一：直接使用命令来挂载</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">docker run -it -v -p
<span class="c1"># -it 交互式进入</span>
<span class="c1"># -v volume卷技术</span>
<span class="c1"># -p 主机端口</span>
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114233.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114233.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114233.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114233.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114233.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114233.png"
    /></p>
<p>新开一个窗口</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">docker inspect 容器id
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114254.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114254.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114254.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114254.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114254.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114254.png"
    /></p>
<p>找到挂载信息Mounts</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114353.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114353.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114353.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114353.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114353.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114353.png"
    /></p>
<p>测试</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114408.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114408.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114408.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114408.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114408.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114408.png"
    /></p>
<p>容器停止后，修改主机文件，再启动容器的时候，数据同样改变</p>
<p>双向同步</p>
<h3 id="实战安装mysql">实战安装mysql</h3>
<p>MySQL的数据持久化命令</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">docker search mysql

<span class="c1"># 拉取</span>
docker pull mysql:5.7

<span class="c1"># 挂载</span>
docker run -d -p 3310:3306 -v /home/mysql/conf:/etc/mysql/conf.d -v /home/mysql/data:/var/lib/mysql -e <span class="nv">MYSQL_ROOT_PASSWORD</span><span class="o">=</span>xn123456 --name mysql mysql:5.7

-d 后台运行
-p 端口映射
-v 卷挂载
-e 环境配置 安装启动mysql需要配置密码
--name 容器名字

</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114432.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114432.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114432.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114432.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114432.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114432.png"
    /></p>
<p>链接测试：打开SQLyog</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114446.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114446.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114446.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114446.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114446.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114446.png"
    /></p>
<p>点 测试链接</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114457.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114457.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114457.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114457.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114457.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114457.png"
    /></p>
<p>点 链接</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114509.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114509.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114509.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114509.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114509.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114509.png"
    /></p>
<h3 id="具名和匿名挂载">具名和匿名挂载</h3>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114529.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114529.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114529.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114529.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114529.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114529.png"
    /></p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114550.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114550.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114550.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114550.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114550.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114550.png"
    /></p>
<h3 id="使用dockerfile来构建docker镜像的文件">使用DockerFile来构建docker镜像的文件</h3>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114743.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114743.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114743.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114743.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114743.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114743.png"
    /></p>
<blockquote>
<p>kas:
没有安装吧？</p>
<p>kas:
安装一下就可以了</p>
<p>py9001021曾叙坚:
centos 默认使用vi写内容，vim需要下载</p>
<p>py9001021曾叙坚:
是的，需要下载vim才能使用</p>
<p>YF:
配置可以改下，字体就很炫酷了</p>
<p>都建民:
用vi  试试</p>
<p>都建民:
你没有安装vim</p>
<p>都建民:
yum install vim</p>
<p>都建民:
试试这个命令</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">yum install vim <span class="c1"># 编辑文件的，没有装一下</span>
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114758.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114758.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114758.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114758.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114758.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114758.png"
    /></p>
<p>安装完之后就可以运行这个命令了</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114810.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114810.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114810.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114810.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114810.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601114810.png"
    /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># 镜像是一层一层的，脚本是一行一行的</span>
<span class="c1"># 指令都是大写的</span>
<span class="c1"># 这里的每个命令可以理解为镜像的一层</span>

FROM centos

VOLUME <span class="o">[</span><span class="s2">&#34;volume01&#34;</span>,<span class="s2">&#34;volume02&#34;</span><span class="o">]</span> <span class="c1"># 再创建镜像的时候就挂载出来</span>

CMD <span class="nb">echo</span> <span class="s2">&#34;---end---&#34;</span>
CMD /bin/bash
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115003.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115003.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115003.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115003.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115003.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115003.png"
    /></p>
<p>想保存并退出</p>
<blockquote>
<p>Wesley.:
shift  加  冒号</p>
</blockquote>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115016.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115016.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115016.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115016.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115016.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115016.png"
    /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">cat dockerfile1

docker build -f dockerfile1 -t padaxing/centos:1.0 .  <span class="c1"># 最后的点很重要 镜像名前面不能有/</span>
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115030.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115030.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115030.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115030.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115030.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115030.png"
    /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">docker images
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115045.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115045.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115045.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115045.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115045.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115045.png"
    /></p>
<p>启动生成的镜像</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115101.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115101.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115101.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115101.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115101.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115101.png"
    /></p>
<p>在容器内部创建一个文件</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115117.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115117.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115117.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115117.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115117.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115117.png"
    /></p>
<p>查看Mounts，Source对应容器外目录，匿名挂载卷</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115131.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115131.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115131.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115131.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115131.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115131.png"
    /></p>
<p>测试一下，在container volume01下生成文件</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115145.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115145.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115145.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115145.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115145.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115145.png"
    /></p>
<p>在主机挂载路径下，也同样生成</p>
<h3 id="多个容器数据共享">多个容器数据共享</h3>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115200.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115200.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115200.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115200.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115200.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115200.png"
    /></p>
<p>看一下有啥images</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115217.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115217.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115217.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115217.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115217.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115217.png"
    /></p>
<p>启动docker01，用之前建的padaxing/centos 1.0  镜像</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">docker run -it --name docker01 padaxing/centos:1.0 <span class="c1"># 1.0必须写</span>
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115230.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115230.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115230.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115230.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115230.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115230.png"
    /></p>
<p>当前这个ctrl+p+q不停止退出</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115241.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115241.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115241.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115241.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115241.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115241.png"
    /></p>
<p>依次启动docker02、docker03</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">docker run -it --name docker02 --volumes-from docker01 padaxing/centos:1.0
</code></pre></td></tr></table>
</div>
</div><p>docker02继承docker01的volumes</p>
<p>可以验证，在docker01下加一个数据，在docker02下也会出现</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115255.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115255.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115255.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115255.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115255.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115255.png"
    /></p>
<p>创建docker03，同样继承docker01</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">docker run -it --name docker03 --volumes-from docker01 padaxing/centos:1.0
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115307.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115307.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115307.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115307.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115307.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115307.png"
    /></p>
<p>在docker03的volume01下建立文件，在docker01的volume01下同样也有</p>
<p><strong>即通过&ndash;volumes-from 可以实现不同容器间的数据共享</strong></p>
<p>删除docker01，数据还在</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">docker rm -f 
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115321.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115321.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115321.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115321.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115321.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115321.png"
    /></p>
<p>可以看到，删除docker01，进入docker02，数据依然在</p>
<p>结论：</p>
<pre><code>容器之间配置信息的传递，数据卷容器的生命周期一直持续到没有容器使用位置

但是如果持久化到了本地，即使所有容器删除了，本地数据是不会删除的
</code></pre>
<hr>
<h2 id="dockerfile">DockerFile</h2>
<p>是用来构建docker镜像的文件，可以理解为命令参数脚本</p>
<p>构建步骤：</p>
<ol>
<li>编写一个dockerfile文件</li>
<li>docker build 构建成为一个镜像</li>
<li>docker run运行镜像</li>
<li>docker push 发布镜像（DockerHub、阿里云镜像仓库 私有/共有）</li>
</ol>
<p>这个写一个项目时一样的</p>
<h3 id="官方dockerfile示例">官方DockerFile示例</h3>
<p>看一下官方的DockerFile</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115349.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115349.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115349.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115349.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115349.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115349.png"
    /></p>
<p>可以看到官方镜像都是基础包，很多功能没有，我们通常会自己搭建自己的镜像</p>
<p>官方既然可以制作镜像，我们亦可以</p>
<hr>
<h3 id="dockerfile基础知识">DockerFile基础知识</h3>
<ol>
<li>每个指令都必须是大写字母</li>
<li>按照从上到下顺序执行</li>
<li>*#*表示注释</li>
<li>每一个指令都会创建体检一个新的镜像层，并提交</li>
</ol>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115407.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115407.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115407.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115407.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115407.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115407.png"
    /></p>
<p>docker是面向开发的，我们以后要发布项目，做镜像，就要编写dockerfile文件，这个文件十分简单！</p>
<p>Docker镜像逐渐成为企业的交付标准，必须掌握！</p>
<hr>
<h3 id="dockerfile命令">DockerFile命令</h3>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115428.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115428.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115428.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115428.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115428.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115428.png"
    /></p>
<h3 id="heading-1"></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">FROM          <span class="c1"># 基础镜像 比如centos</span>
MAINTAINER    <span class="c1"># 镜像是谁写的 姓名+邮箱</span>
RUN           <span class="c1"># 镜像构建时需要运行的命令</span>
ADD           <span class="c1"># 添加，比如添加一个tomcat压缩包</span>
WORKDIR       <span class="c1"># 镜像的工作目录</span>
VOLUME        <span class="c1"># 挂载的目录</span>
EXPOSE        <span class="c1"># 指定暴露端口，跟-p一个道理</span>
RUN           <span class="c1"># 最终要运行的</span>
CMD           <span class="c1"># 指定这个容器启动的时候要运行的命令，只有最后一个会生效，而且可被替代</span>
ENTRYPOINT    <span class="c1"># 指定这个容器启动的时候要运行的命令，可以追加命令</span>
ONBUILD       <span class="c1"># 当构建一个被继承Dockerfile 这个时候运行ONBUILD指定，触发指令</span>
COPY          <span class="c1"># 将文件拷贝到镜像中</span>
ENV           <span class="c1"># 构建的时候设置环境变量</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="实战构建自己的centos">实战构建自己的centos</h3>
<p>Docker Hub中99%的镜像都是从FROM scratch开始的</p>
<p>添加centos7的压缩包</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># 创建一个自己的centos</span>

<span class="c1"># 进入home目录</span>
<span class="nb">cd</span> /home

<span class="c1"># 创建一个目录，之后的东西都保存到这里</span>
mkdir dockerfile
<span class="c1"># 进入这个目录</span>
<span class="nb">cd</span> dockerfile/
<span class="c1"># 创建一个dockerfile，名字叫mydockerfile</span>
vim mydockerfile-centos


</code></pre></td></tr></table>
</div>
</div><p>xshell新开一个界面</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># 官方默认centos</span>
docker run -it centos
<span class="nb">pwd</span> <span class="c1"># 官方默认有pwd命令</span>
vim <span class="c1"># 官方默认没有vim命令</span>
ifconfig <span class="c1"># 官方默认没有ifconfig命令</span>
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115458.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115458.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115458.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115458.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115458.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115458.png"
    /></p>
<p>回到mydockerfile</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115509.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115509.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115509.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115509.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115509.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115509.png"
    /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># 下面给官方centos加上自定义的内容</span>
FROM centos
MAINTAINER padaxing&lt;010301200@hai.com&gt;

ENV MYPATH /usr/local
WORKDIR <span class="nv">$MYPATH</span>

RUN yum -y install vim
RUN yum -y install net-tools

EXPOSE <span class="m">80</span>

CMD <span class="nb">echo</span> <span class="nv">$MYPATH</span>
CMD <span class="nb">echo</span> <span class="s2">&#34;---end---&#34;</span>
CMD /bin/bash
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115524.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115524.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115524.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115524.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115524.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115524.png"
    /></p>
<p>ESC, shif + : 输入wq保存并退出</p>
<p>如果写错了需要修改、</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">vim mydockerfile-centos
<span class="c1"># 进入之后按i或者INSERT键即可修改</span>
</code></pre></td></tr></table>
</div>
</div><p>下面通过这个这个文件创建镜像</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">docker build -f dockerfile-centos -t mycentos:0.1 .
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115541.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115541.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115541.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115541.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115541.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115541.png"
    /></p>
<p>依次执行命令</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115553.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115553.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115553.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115553.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115553.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115553.png"
    /></p>
<p>最终返回Successfully表示成功</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115604.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115604.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115604.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115604.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115604.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115604.png"
    /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">docker run -it mycentos:0.1 <span class="c1"># 版本号必须写，不然他会去找最新的</span>
<span class="nb">pwd</span>
vim
ifconfig
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115616.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115616.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115616.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115616.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115616.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115616.png"
    /></p>
<p>这时可以看到这些功能都有了</p>
<p>可以通过查看docker构建历史</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115628.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115628.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115628.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115628.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115628.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115628.png"
    /></p>
<p>可以看到当前这个镜像是怎么一步一步构建起来的</p>
<p>我们平时拿到一个镜像也可以通过这个方法研究一下他是怎么做的</p>
<h3 id="cmd与entrypoint">CMD与ENTRYPOINT</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">FROM centos
CMD <span class="o">[</span><span class="s2">&#34;ls&#34;</span>,<span class="s2">&#34;-a&#34;</span><span class="o">]</span> <span class="c1"># 启动centos展示目录</span>
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115643.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115643.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115643.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115643.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115643.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115643.png"
    /></p>
<p><strong>测试ENTRYPOINT</strong></p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115655.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115655.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115655.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115655.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115655.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115655.png"
    /></p>
<p><strong>run的时候可以直接加命令</strong></p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115706.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115706.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115706.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115706.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115706.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115706.png"
    /></p>
<p>Docker中许多命令都十分相似，我们需要了解他们的区别，最好的方式就是这样对比测试</p>
<p>区别：</p>
<pre><code>CMD是直接产生了覆盖现象，想要在后面追加命令则需要输入被覆盖的命令加上要追加的命令；而entrypoint可以直接在后面追加命令不会产生覆盖现象
</code></pre>
<hr>
<h3 id="实战tomcat镜像">实战Tomcat镜像</h3>
<ol>
<li>
<p>准备镜像文件 tomcat压缩包，jdk压缩包</p>
<p>jdk压缩包：https://blog.csdn.net/doupeihua/article/details/51831947</p>
<p>tomcat压缩包：https://tomcat.apache.org/download-90.cgi</p>
</li>
<li>
<p>编写dockerflie文件，官方命名<strong>Dockerfile</strong>，build会自动寻找这个文件，就不需要-f指定了</p>
</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">FROM centos

MAINTAINER wei&lt;1186419584@qq.com&gt;

COPY readme.txt /usr/local/readme.txt          <span class="c1">#将文件复制到容器里面的路径</span>
ADD jdk-8u11-linux-x64.tar.gz /usr/local/		<span class="c1">#将压缩包添加到容器中（使用add自动会帮你解压）</span>
ADD apache-tomcat-9.0.41.tar.gz /usr/local/

RUN yum -y install vim					<span class="c1">#安装vim命令	</span>
ENV MYPATH /usr/local					<span class="c1">#进去后就进入这个路径</span>
WORKDIR <span class="nv">$MYPATH</span>							<span class="c1">#工作目录</span>

ENV JAVA_HOME /usr/local/jdk1.8.0_11 	<span class="c1">#配置Java环境变量（Java安装目录）</span>

ENV CLASSPATH <span class="nv">$JAVA_HOME</span>/lib/dt.jar:<span class="nv">$JAVA_HOME</span>/lib/tools.jar <span class="c1">#Java配置</span>

ENV CATALINA_HOME /usr/local/apache-tomcat-9.0.41 		<span class="c1">#配置tomcat环境变量（tomcat默认的安装目录）</span>

ENV CATALINA_BASH /usr/local/apache-tomcat-9.0.41		<span class="c1">#tomcat配置</span>

ENV PATH <span class="nv">$PATH</span>:<span class="nv">$JAVA_HOME</span>/bin:<span class="nv">$CATALINA_HOME</span>/lib:<span class="nv">$CATALINA_HOME</span>/bin		<span class="c1">#将这些目录放入总的path中，$CATALINA_HOME/lib：tomcat的依赖，$CATALINA_HOME/bin启动tomcat就不需要进入bin目录了</span>

EXPOSE <span class="m">8080</span>  <span class="c1">#暴露端口</span>

CMD /usr/local/apache-tomcat-9.0.41/bin/startup.sh <span class="o">&amp;&amp;</span> tail -F /url/local/apache-tomcat-9.0.41/bin/logs/catalina.out <span class="c1">#执行tomcat后面是做一些参数，展示日志信息 </span>
</code></pre></td></tr></table>
</div>
</div><p>3.运行镜像</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">docker build -t 镜像名 .
</code></pre></td></tr></table>
</div>
</div><p>4.启动镜像</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">docker run -d -p 3345:8080 --name weitomcat02 -v /home/wei/build/tomcat/test:/usr/local/apache-tomcat-9.0.41/webapps/test -v /home/wei/build/tomcat/tomcatlogs/:/usr/local/apache-tomcat-9.0.41/logs divtomcat
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115726.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115726.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115726.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115726.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115726.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115726.png"
    /></p>
<p>5.访问测试</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115737.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115737.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115737.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115737.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115737.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115737.png"
    /></p>
<p>6.发布项目（由于做了卷挂载，我们直接在本地编写就可以发布了！）</p>
<p><strong>web.xml文件</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">&#34;1.0&#34;</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">&#34;UTF-8&#34;</span>?&gt;
&lt;web-app <span class="nv">version</span><span class="o">=</span><span class="s2">&#34;2.4&#34;</span> 
    <span class="nv">xmlns</span><span class="o">=</span><span class="s2">&#34;http://java.sun.com/xml/ns/j2ee&#34;</span> 
    xmlns:xsi<span class="o">=</span><span class="s2">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
    xsi:schemaLocation<span class="o">=</span><span class="s2">&#34;http://java.sun.com/xml/ns/j2ee 
</span><span class="s2">        http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd&#34;</span>&gt;
&lt;/web-app&gt;
</code></pre></td></tr></table>
</div>
</div><p><strong>index.jsp文件</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">&lt;%@ page language=&#34;java&#34; contentType=&#34;text/html; charset=UTF-8&#34;
    pageEncoding=&#34;UTF-8&#34;%&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset=&#34;utf-8&#34;&gt;
&lt;title&gt;hello,wei&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
Hello World!&lt;br/&gt;
&lt;%
System.out.println(&#34;-------my test web logs-----------&#34;);
%&gt;
&lt;/body&gt;
&lt;/html
</code></pre></td></tr></table>
</div>
</div><h3 id="发布自己的镜像">发布自己的镜像</h3>
<p>1、地址https://hub.docker.com/ 注册自己的账号</p>
<p>2、确定这个账号可以登录</p>
<p>3、在我们的服务器上提交自己的镜像</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>root@iZ2zejeormv0s24sdvazvxZ ~<span class="o">]</span><span class="c1"># docker login --help</span>

Usage:  docker login <span class="o">[</span>OPTIONS<span class="o">]</span> <span class="o">[</span>SERVER<span class="o">]</span>

Log in to a Docker registry.
If no server is specified, the default is defined by the daemon.

Options:
  -p, --password string   Password
      --password-stdin    Take the password from stdin
  -u, --username string   Username
<span class="o">[</span>root@iZ2zejeormv0s24sdvazvxZ ~<span class="o">]</span><span class="c1"># docker login -u cloverfelix</span>
Password: 
WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store

Login Succeeded
<span class="o">[</span>root@iZ2zejeormv0s24sdvazvxZ ~<span class="o">]</span><span class="c1"># </span>
</code></pre></td></tr></table>
</div>
</div><p>4、登录完毕后就可以提交镜像了，就是一步 docker push</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115803.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115803.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115803.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115803.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115803.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115803.png"
    /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># push到自己的镜像到服务器上</span>
<span class="o">[</span>root@iZ2zejeormv0s24sdvazvxZ ~<span class="o">]</span><span class="c1"># docker push divtomcat</span>
Using default tag: latest
The push refers to repository <span class="o">[</span>docker.io/library/divtomcat<span class="o">]</span>
b23ff398b23f: Preparing 
e0403d0b82a9: Preparing 
d252d00ff518: Preparing 
537a66dda3f7: Preparing 
2653d992f4ef: Preparing 
denied: requested access to the resource is denied <span class="c1"># push请求被拒绝了</span>
<span class="o">[</span>root@iZ2zejeormv0s24sdvazvxZ ~<span class="o">]</span><span class="c1"># </span>
</code></pre></td></tr></table>
</div>
</div><p><strong>push上去的时候一定记得带上版本号</strong></p>
<h3 id="小结-1">小结：</h3>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115820.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115820.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115820.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115820.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115820.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115820.png"
    /></p>
<h2 id="docker网络">Docker网络</h2>
<h3 id="理解docker0">理解docker0</h3>
<p>1、清空所有环境</p>
<p>测试</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115832.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115832.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115832.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115832.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115832.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115832.png"
    /></p>
<p>三个网络</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># 问题： docker是如何处理容器访问网络的？</span>
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115848.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115848.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115848.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115848.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115848.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115848.png"
    /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># [root@iZ2zejeormv0s24sdvazvxZ ~]# docker run -d -P --name tomcat01 tomcat  运行一个tomcat</span>



<span class="c1"># 查看容器的内部网络地址 ip addr， 发现容器启动的时候会得到一个eth0@if91 IP地址，docker分配的！</span>
<span class="o">[</span>root@iZ2zejeormv0s24sdvazvxZ ~<span class="o">]</span><span class="c1"># docker exec -it tomcat01 ip addr</span>
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu <span class="m">65536</span> qdisc noqueue state UNKNOWN group default qlen <span class="m">1000</span>
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
90: eth0@if91: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class="m">1500</span> qdisc noqueue state UP group default 
    link/ether 02:42:ac:11:00:02 brd ff:ff:ff:ff:ff:ff link-netnsid <span class="m">0</span>
    inet 172.17.0.2/16 brd 172.17.255.255 scope global eth0
       valid_lft forever preferred_lft forever

<span class="c1"># 思考：Linux能不能ping通容器内部？</span>
<span class="o">[</span>root@iZ2zejeormv0s24sdvazvxZ ~<span class="o">]</span><span class="c1"># ping 172.17.0.2</span>
PING 172.17.0.2 <span class="o">(</span>172.17.0.2<span class="o">)</span> 56<span class="o">(</span>84<span class="o">)</span> bytes of data.
<span class="m">64</span> bytes from 172.17.0.2: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">1</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">64</span> <span class="nv">time</span><span class="o">=</span>0.085 ms
<span class="m">64</span> bytes from 172.17.0.2: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">2</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">64</span> <span class="nv">time</span><span class="o">=</span>0.070 ms
<span class="m">64</span> bytes from 172.17.0.2: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">3</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">64</span> <span class="nv">time</span><span class="o">=</span>0.067 ms
<span class="m">64</span> bytes from 172.17.0.2: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">4</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">64</span> <span class="nv">time</span><span class="o">=</span>0.070 ms
<span class="m">64</span> bytes from 172.17.0.2: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">5</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">64</span> <span class="nv">time</span><span class="o">=</span>0.066 ms
<span class="m">64</span> bytes from 172.17.0.2: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">6</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">64</span> <span class="nv">time</span><span class="o">=</span>0.091 ms
<span class="m">64</span> bytes from 172.17.0.2: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">7</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">64</span> <span class="nv">time</span><span class="o">=</span>0.070 ms
^C
--- 172.17.0.2 ping statistics ---
<span class="m">7</span> packets transmitted, <span class="m">7</span> received, 0% packet loss, <span class="nb">time</span> 5999ms
rtt min/avg/max/mdev <span class="o">=</span> 0.066/0.074/0.091/0.010 ms

<span class="c1"># Linux可以ping通docker容器内部</span>
</code></pre></td></tr></table>
</div>
</div><p>原理</p>
<p>1、我们没每启动一个docker容器，docker就会给docker容器分配一个IP，我们只要安装了docker，就会有一个网卡docker0，桥接模式，使用的技术是evth-pair技术</p>
<p>再次测试IP addr</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115904.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115904.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115904.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115904.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115904.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115904.png"
    /></p>
<p>2、再启动一个容器测试，发现又多了一对网卡</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115915.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115915.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115915.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115915.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115915.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115915.png"
    /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># 我们发现这个容器带来的网卡，都是一对对的</span>
<span class="c1"># evth-pair就是一对的虚拟设备接口，他们都是成对的出现，一端连接着协议，一端批次相连</span>
<span class="c1"># 正因为有这个特性，evth-pair 充当一个桥梁，连接各种虚拟网络设备的</span>
<span class="c1"># OpenStac，Docker容器之间的连接，OVS的连接，都是使用evth-pair 技术</span>
</code></pre></td></tr></table>
</div>
</div><p>3、我们来测试一下tomcat01 和 tomcat02是否可以ping通！</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># [root@iZ2zejeormv0s24sdvazvxZ ~]# docker exec -it tomcat02 ping 172.17.0.2</span>

<span class="c1"># 结论： 容器和容器之间是可以互相ping通的！</span>
</code></pre></td></tr></table>
</div>
</div><p>绘制一个网络模型图：</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115929.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115929.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115929.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115929.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115929.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115929.png"
    /></p>
<p>结论：</p>
<pre><code>tomcat01和tomcat02是共用一个路由器的，也就是我们的docker0

所有的容器在不指定网络的情况下，都是docker0路由的，docker会给我们的容器

分配一个默认的可用IP
</code></pre>
<p>小结：</p>
<p>Docker使用的是Linux的桥接，宿主机中是一个docker容器的网桥 docker0</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115941.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115941.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115941.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115941.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115941.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115941.png"
    /></p>
<p>Docker中的所有的网络接口都是虚拟的，虚拟的转发效率高！</p>
<p>只要容器删除，对应的网桥一对就没了</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115952.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115952.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115952.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115952.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115952.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601115952.png"
    /></p>
<p>思考一个场景，我们编写了一个微服务，database url=ip:，项目不重启，数据库ip换掉了，我们希望可以解决这个问题，可以使用名字来进行访问容器？  这里使用的是**&ndash;link**技术</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>root@iZ2zejeormv0s24sdvazvxZ ~<span class="o">]</span><span class="c1"># docker exec -it tomcat02 ping tomcat01</span>
ping: tomcat01: Name or service not known

<span class="c1"># 如何解决呢？</span>
<span class="c1"># 通过--link 既可以解决了网络连通问题</span>
<span class="o">[</span>root@iZ2zejeormv0s24sdvazvxZ ~<span class="o">]</span><span class="c1"># docker run -d  -P --name tomcat03 --link tomcat02 tomcat</span>
581a112c15d5f4de2634cb1027ff1d011a1c495b4e83a27ccd98784c17fce05f
<span class="o">[</span>root@iZ2zejeormv0s24sdvazvxZ ~<span class="o">]</span><span class="c1"># docker exec -it tomcat03 ping tomcat02</span>
PING tomcat02 <span class="o">(</span>172.17.0.3<span class="o">)</span> 56<span class="o">(</span>84<span class="o">)</span> bytes of data.
<span class="m">64</span> bytes from tomcat02 <span class="o">(</span>172.17.0.3<span class="o">)</span>: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">1</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">64</span> <span class="nv">time</span><span class="o">=</span>0.126 ms
<span class="m">64</span> bytes from tomcat02 <span class="o">(</span>172.17.0.3<span class="o">)</span>: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">2</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">64</span> <span class="nv">time</span><span class="o">=</span>0.102 ms
<span class="m">64</span> bytes from tomcat02 <span class="o">(</span>172.17.0.3<span class="o">)</span>: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">3</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">64</span> <span class="nv">time</span><span class="o">=</span>0.106 ms
<span class="m">64</span> bytes from tomcat02 <span class="o">(</span>172.17.0.3<span class="o">)</span>: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">4</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">64</span> <span class="nv">time</span><span class="o">=</span>0.096 ms

<span class="c1"># 反向可以ping通嘛？</span>
<span class="o">[</span>root@iZ2zejeormv0s24sdvazvxZ ~<span class="o">]</span><span class="c1"># docker exec -it tomcat02 ping tomcat03</span>
ping: tomcat03: Name or service not known
</code></pre></td></tr></table>
</div>
</div><p>探究inspect：</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120009.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120009.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120009.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120009.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120009.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120009.png"
    /></p>
<p>其实这个tomcat03就是在本地配置了tomcat02的配置</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>root@iZ2zejeormv0s24sdvazvxZ ~<span class="o">]</span><span class="c1"># docker exec -it tomcat03 cat /etc/hosts</span>
127.0.0.1       localhost
::1     localhost ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
<span class="c1"># 172.17.0.3      tomcat02 0303648ab9d4</span>
172.17.0.4      581a112c15d5
</code></pre></td></tr></table>
</div>
</div><p>本质探究：&ndash;link就是我们在hosts配置中增加了一个tomcat02的映射。172.17.0.3      tomcat02 0303648ab9d4</p>
<p>我们现在玩Docker已经不建议使用-link了！</p>
<p>使用的都是自定义网络！不适用docker0！</p>
<p>docker0问题：它不支持容器名连接访问！</p>
<h3 id="自定义网络">自定义网络</h3>
<p>查看所有的docker网络</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120024.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120024.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120024.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120024.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120024.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120024.png"
    /></p>
<p><strong>网络模式</strong></p>
<p>bridge： 桥接 就是在docker上搭桥（默认使用，自己创建也使用bridge）</p>
<p>none： 不配置网络</p>
<p>host： 和宿主机共享网络</p>
<p>container： 容器网络连通！（用得少，局限很多）</p>
<p><strong>测试</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># 我们直接启动的命令 默认是有--net bridge，而这个就是我们的docker0</span>
<span class="o">[</span>root@iZ2zejeormv0s24sdvazvxZ ~<span class="o">]</span><span class="c1"># docker run -d -P --name tomcat01 --net bridge tomcat</span>

<span class="c1"># docker0特点： 默认，域名不能访问，--link可以打通连接！</span>

<span class="c1"># 我们可以自定义一个网络！</span>
<span class="c1"># --driver bridge 连接模式</span>
<span class="c1"># --subnet 192.168.0.0/16 子网地址</span>
<span class="c1"># --gateway 192.168.0.1 网关</span>
<span class="o">[</span>root@iZ2zejeormv0s24sdvazvxZ ~<span class="o">]</span><span class="c1"># docker network create --driver bridge --subnet 192.168.0.0/16 --gateway 192.168.0.1 mynet</span>
f833096b830f85a24a3fe4d1f4e9e0cc9f5327bc8a0059ec9577d600fb54b111

<span class="o">[</span>root@iZ2zejeormv0s24sdvazvxZ ~<span class="o">]</span><span class="c1"># docker network ls</span>
NETWORK ID     NAME      DRIVER    SCOPE
e3ed9ad5b74b   bridge    bridge    <span class="nb">local</span>
51f1bd18d34e   host      host      <span class="nb">local</span>
f833096b830f   mynet     bridge    <span class="nb">local</span>
bb8aa0300ba6   none      null      <span class="nb">local</span>
</code></pre></td></tr></table>
</div>
</div><p>我们自己的网络就创建好了</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120038.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120038.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120038.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120038.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120038.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120038.png"
    /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>root@iZ2zejeormv0s24sdvazvxZ ~<span class="o">]</span><span class="c1"># docker run -d -P --net mynet --name tomcat-net-01 tomcat</span>
7904d3327a0c8c7f32e43c0611aeecf97f5b1ae9878957c3a09aae53c8c262bb
<span class="o">[</span>root@iZ2zejeormv0s24sdvazvxZ ~<span class="o">]</span><span class="c1"># docker run -d -P --net mynet --name tomcat-net-02 tomcat</span>
11795f8616ff8b5df0bc172fc4f67c68d30ead31442dfd812f1d09959ab0600c
<span class="o">[</span>root@iZ2zejeormv0s24sdvazvxZ ~<span class="o">]</span><span class="c1"># docker network inspect mynet</span>
<span class="o">[</span>
    <span class="o">{</span>
        <span class="s2">&#34;Name&#34;</span>: <span class="s2">&#34;mynet&#34;</span>,
        <span class="s2">&#34;Id&#34;</span>: <span class="s2">&#34;f833096b830f85a24a3fe4d1f4e9e0cc9f5327bc8a0059ec9577d600fb54b111&#34;</span>,
        <span class="s2">&#34;Created&#34;</span>: <span class="s2">&#34;2021-02-03T00:17:44.277900481+08:00&#34;</span>,
        <span class="s2">&#34;Scope&#34;</span>: <span class="s2">&#34;local&#34;</span>,
        <span class="s2">&#34;Driver&#34;</span>: <span class="s2">&#34;bridge&#34;</span>,
        <span class="s2">&#34;EnableIPv6&#34;</span>: false,
        <span class="s2">&#34;IPAM&#34;</span>: <span class="o">{</span>
            <span class="s2">&#34;Driver&#34;</span>: <span class="s2">&#34;default&#34;</span>,
            <span class="s2">&#34;Options&#34;</span>: <span class="o">{}</span>,
            <span class="s2">&#34;Config&#34;</span>: <span class="o">[</span>
                <span class="o">{</span>
                    <span class="s2">&#34;Subnet&#34;</span>: <span class="s2">&#34;192.168.0.0/16&#34;</span>,
                    <span class="s2">&#34;Gateway&#34;</span>: <span class="s2">&#34;192.168.0.1&#34;</span>
                <span class="o">}</span>
            <span class="o">]</span>
        <span class="o">}</span>,
        <span class="s2">&#34;Internal&#34;</span>: false,
        <span class="s2">&#34;Attachable&#34;</span>: false,
        <span class="s2">&#34;Ingress&#34;</span>: false,
        <span class="s2">&#34;ConfigFrom&#34;</span>: <span class="o">{</span>
            <span class="s2">&#34;Network&#34;</span>: <span class="s2">&#34;&#34;</span>
        <span class="o">}</span>,
        <span class="s2">&#34;ConfigOnly&#34;</span>: false,
        <span class="s2">&#34;Containers&#34;</span>: <span class="o">{</span>
            <span class="s2">&#34;11795f8616ff8b5df0bc172fc4f67c68d30ead31442dfd812f1d09959ab0600c&#34;</span>: <span class="o">{</span>
                <span class="s2">&#34;Name&#34;</span>: <span class="s2">&#34;tomcat-net-02&#34;</span>,
                <span class="s2">&#34;EndpointID&#34;</span>: <span class="s2">&#34;1b542176401a508f905acbb09ab2d07c45c3280e6f60e66428a565766470b46e&#34;</span>,
                <span class="s2">&#34;MacAddress&#34;</span>: <span class="s2">&#34;02:42:c0:a8:00:03&#34;</span>,
                <span class="s2">&#34;IPv4Address&#34;</span>: <span class="s2">&#34;192.168.0.3/16&#34;</span>,
                <span class="s2">&#34;IPv6Address&#34;</span>: <span class="s2">&#34;&#34;</span>
            <span class="o">}</span>,
            <span class="s2">&#34;7904d3327a0c8c7f32e43c0611aeecf97f5b1ae9878957c3a09aae53c8c262bb&#34;</span>: <span class="o">{</span>
                <span class="s2">&#34;Name&#34;</span>: <span class="s2">&#34;tomcat-net-01&#34;</span>,
                <span class="s2">&#34;EndpointID&#34;</span>: <span class="s2">&#34;872b36e9c2a5d9f59a2931e1edad34c3eded6d693c3fef830e29bcdae511b4d9&#34;</span>,
                <span class="s2">&#34;MacAddress&#34;</span>: <span class="s2">&#34;02:42:c0:a8:00:02&#34;</span>,
                <span class="s2">&#34;IPv4Address&#34;</span>: <span class="s2">&#34;192.168.0.2/16&#34;</span>,
                <span class="s2">&#34;IPv6Address&#34;</span>: <span class="s2">&#34;&#34;</span>
            <span class="o">}</span>
        <span class="o">}</span>,
        <span class="s2">&#34;Options&#34;</span>: <span class="o">{}</span>,
        <span class="s2">&#34;Labels&#34;</span>: <span class="o">{}</span>
    <span class="o">}</span>
<span class="o">]</span>

<span class="c1"># 再次测试ping连接</span>
<span class="o">[</span>root@iZ2zejeormv0s24sdvazvxZ ~<span class="o">]</span><span class="c1"># docker exec -it tomcat-net-01 ping 192.168.0.3</span>
PING 192.168.0.3 <span class="o">(</span>192.168.0.3<span class="o">)</span> 56<span class="o">(</span>84<span class="o">)</span> bytes of data.
<span class="m">64</span> bytes from 192.168.0.3: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">1</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">64</span> <span class="nv">time</span><span class="o">=</span>0.121 ms
<span class="m">64</span> bytes from 192.168.0.3: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">2</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">64</span> <span class="nv">time</span><span class="o">=</span>0.096 ms
<span class="m">64</span> bytes from 192.168.0.3: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">3</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">64</span> <span class="nv">time</span><span class="o">=</span>0.100 ms

--- 192.168.0.3 ping statistics ---
<span class="m">3</span> packets transmitted, <span class="m">3</span> received, 0% packet loss, <span class="nb">time</span> 1001ms
rtt min/avg/max/mdev <span class="o">=</span> 0.096/0.105/0.121/0.016 ms

<span class="c1">#现在不使用--link也可以ping名字了！</span>
<span class="o">[</span>root@iZ2zejeormv0s24sdvazvxZ ~<span class="o">]</span><span class="c1"># docker exec -it tomcat-net-01 ping tomcat-net-02</span>
PING tomcat-net-02 <span class="o">(</span>192.168.0.3<span class="o">)</span> 56<span class="o">(</span>84<span class="o">)</span> bytes of data.
<span class="m">64</span> bytes from tomcat-net-02.mynet <span class="o">(</span>192.168.0.3<span class="o">)</span>: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">1</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">64</span> <span class="nv">time</span><span class="o">=</span>0.069 ms
<span class="m">64</span> bytes from tomcat-net-02.mynet <span class="o">(</span>192.168.0.3<span class="o">)</span>: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">2</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">64</span> <span class="nv">time</span><span class="o">=</span>0.099 ms
<span class="m">64</span> bytes from tomcat-net-02.mynet <span class="o">(</span>192.168.0.3<span class="o">)</span>: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">3</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">64</span> <span class="nv">time</span><span class="o">=</span>0.103 ms
<span class="m">64</span> bytes from tomcat-net-02.mynet <span class="o">(</span>192.168.0.3<span class="o">)</span>: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">4</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">64</span> <span class="nv">time</span><span class="o">=</span>0.093 ms
<span class="m">64</span> bytes from tomcat-net-02.mynet <span class="o">(</span>192.168.0.3<span class="o">)</span>: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">5</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">64</span> <span class="nv">time</span><span class="o">=</span>0.100 ms

--- tomcat-net-02 ping statistics ---
<span class="m">5</span> packets transmitted, <span class="m">5</span> received, 0% packet loss, <span class="nb">time</span> 1002ms
rtt min/avg/max/mdev <span class="o">=</span> 0.069/0.092/0.103/0.017 ms
</code></pre></td></tr></table>
</div>
</div><p><strong>结论：我们自定义的网络docker都已经帮我们维护好了对应的关系，推荐我们平时这样使用网络</strong></p>
<p>好处：</p>
<pre><code>redis - 不同的集群使用不同的网络，保证集群是安全和健康的

mysql - 不同的集群使用不同的网络，保证集群是安全和健康的
</code></pre>
<h3 id="网络连通">网络连通</h3>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120052.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120052.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120052.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120052.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120052.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120052.png"
    /></p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120103.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120103.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120103.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120103.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120103.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120103.png"
    /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># 测试打通 tomcat01 到 mynet</span>

<span class="c1"># 连通之后就是将我们的 tomcat01 加到 mynet网络下</span>

<span class="c1"># 一个容器两个ip地址</span>
<span class="c1">#阿里云服务器： 一个公网 一个私网地址</span>
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120113.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120113.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120113.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120113.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120113.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120113.png"
    /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># tomcat01 可以与 tomcat-net-01</span>
连通
<span class="o">[</span>root@iZ2zejeormv0s24sdvazvxZ ~<span class="o">]</span><span class="c1"># docker exec -it tomcat-net-01 ping 192.168.0.4</span>
PING 192.168.0.4 <span class="o">(</span>192.168.0.4<span class="o">)</span> 56<span class="o">(</span>84<span class="o">)</span> bytes of data.
<span class="m">64</span> bytes from 192.168.0.4: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">1</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">64</span> <span class="nv">time</span><span class="o">=</span>0.134 ms
<span class="m">64</span> bytes from 192.168.0.4: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">2</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">64</span> <span class="nv">time</span><span class="o">=</span>0.095 ms
<span class="m">64</span> bytes from 192.168.0.4: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">3</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">64</span> <span class="nv">time</span><span class="o">=</span>0.097 ms
<span class="m">64</span> bytes from 192.168.0.4: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">4</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">64</span> <span class="nv">time</span><span class="o">=</span>0.096 ms
^C
--- 192.168.0.4 ping statistics ---
<span class="m">4</span> packets transmitted, <span class="m">4</span> received, 0% packet loss, <span class="nb">time</span> 1002ms
rtt min/avg/max/mdev <span class="o">=</span> 0.095/0.105/0.134/0.019 ms

<span class="c1"># tomcat02 与 tomcat-net-01依旧打不通</span>
<span class="o">[</span>root@iZ2zejeormv0s24sdvazvxZ ~<span class="o">]</span><span class="c1"># docker exec -it tomcat02 ping tomcat-net-01</span>
ping: tomcat-net-01: Name or service not known
</code></pre></td></tr></table>
</div>
</div><p>结论：假设要跨网络操作别人，就需要使用docker network connect 连通！</p>
<h3 id="实战部署redis集群">实战：部署Redis集群</h3>
<h2 id="idea整合docker">IDEA整合Docker</h2>
<h2 id="docker-整合docker">Docker 整合Docker</h2>
<h2 id="docker-compose">Docker Compose</h2>
<h2 id="docker-swarm">Docker Swarm</h2>
<h2 id="各种bug">各种bug</h2>
<h3 id="xshell链接失败">Xshell链接失败</h3>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120127.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120127.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120127.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120127.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120127.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120127.png"
    /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">Connecting to 192.168.147.131:22...
Could not connect to <span class="s1">&#39;192.168.147.131&#39;</span> <span class="o">(</span>port 22<span class="o">)</span>: Connection failed.

</code></pre></td></tr></table>
</div>
</div><p>注：电脑休眠重启后，机子会断开，要重新在vmware里面输入ip addr 获得ip</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120136.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120136.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120136.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120136.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120136.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120136.png"
    /></p>
<p>修改xshell中的主机接口即可</p>
<p><img
        class="lazyload"
        data-src="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120148.png"
        data-srcset="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120148.png, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120148.png 1.5x, https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120148.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120148.png"
        title="https://cdn.jsdelivr.net/gh/cloverfelix/image/image/20210601120148.png"
    /></p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2021-06-01</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/docker/index.md" target="_blank" rel="noopener noreferrer">阅读原始文档</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="https://cloverfelix.github.io/docker/" data-title="Docker" data-hashtags="Docker"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Facebook" data-sharer="facebook" data-url="https://cloverfelix.github.io/docker/" data-hashtag="Docker"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Hacker News" data-sharer="hackernews" data-url="https://cloverfelix.github.io/docker/" data-title="Docker"><i class="fab fa-hacker-news fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Line" data-sharer="line" data-url="https://cloverfelix.github.io/docker/" data-title="Docker"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@4.23.0/icons/line.svg"></i></a><a href="javascript:void(0);" title="分享到 微博" data-sharer="weibo" data-url="https://cloverfelix.github.io/docker/" data-title="Docker"><i class="fab fa-weibo fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/docker/">Docker</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/springboot/" class="prev" rel="prev" title="Springboot"><i class="fas fa-angle-left fa-fw"></i>Springboot</a>
            <a href="/mybatis/" class="next" rel="next" title="Mybatis">Mybatis<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2021</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank" rel="noopener noreferrer">Clover</a></span></div>
        </div></footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.0/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/algoliasearch@4.9.1/dist/algoliasearch-lite.umd.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.4.1/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":10},"comment":{},"search":{"algoliaAppID":"YWTL89SVYC","algoliaIndex":"blog","algoliaSearchKey":"2cb3f95e7193d38260ef06bc3d5fc608","highlightTag":"em","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"algolia"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
